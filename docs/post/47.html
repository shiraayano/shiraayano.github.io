<!DOCTYPE html>
<html data-color-mode="light" data-dark-theme="dark_colorblind" data-light-theme="light" lang="zh-CN">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />
    
    <link rel="icon" href="https://avatars.githubusercontent.com/u/69860501?v=4"><script>
        let theme = localStorage.getItem("meek_theme") || "light";
        document.documentElement.setAttribute("data-color-mode", theme);
    </script>
<meta name="description" content="### MySQL
1. **SQL语言四大类别**：
    - **DDL**：用于定义数据库结构，如创建、修改、删除表。">
<meta property="og:title" content="Mysql 初阶">
<meta property="og:description" content="### MySQL
1. **SQL语言四大类别**：
    - **DDL**：用于定义数据库结构，如创建、修改、删除表。">
<meta property="og:type" content="article">
<meta property="og:url" content="https://blog.adouzi.eu.org/post/47.html">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Meekdai/meekdai.github.io/logo64.jpg">
<title>Mysql 初阶</title>
<link href="//unpkg.com/@wooorm/starry-night@2.1.1/style/both.css" rel="stylesheet" />


</head>
<style>
body{box-sizing: border-box;min-width: 200px;max-width: 900px;margin: 20px auto;padding: 45px;font-size: 16px;font-family: sans-serif;line-height: 1.25;}
#header{display:flex;padding-bottom:8px;border-bottom: 1px solid var(--borderColor-muted, var(--color-border-muted));margin-bottom: 16px;}
#footer {margin-top:64px; text-align: center;font-size: small;}

</style>

<style>
.postTitle{margin: auto 0;font-size:40px;font-weight:bold;}
.title-right{display:flex;margin:auto 0 0 auto;}
.title-right .circle{padding: 14px 16px;margin-right:8px;}
#postBody{border-bottom: 1px solid var(--color-border-default);padding-bottom:36px;}
#postBody hr{height:2px;}
#cmButton{height:48px;margin-top:48px;}
#comments{margin-top:64px;}
.g-emoji{font-size:24px;}
@media (max-width: 600px) {
    body {padding: 8px;}
    .postTitle{font-size:24px;}
}
.copy-feedback {
    display: none;
    position: absolute;
    top: 10px;
    right: 50px;
    color: var(--color-fg-on-emphasis);
    background-color: var(--color-fg-muted);
    border-radius: 3px;
    padding: 5px 8px;
    font-size: 12px;
}
</style>
<style>img{max-width:100%;height:auto;display:block;margin:1em auto;border-radius:8px;box-shadow:0 4px 6px rgba(0,0,0,.1);transition:transform .2s ease,box-shadow .2s ease;}img[data-src]{opacity:0;animation:fadeIn 1s forwards;}@keyframes fadeIn{to{opacity:1;}}img:hover{transform:scale(1.05);box-shadow:0 8px 12px rgba(0,0,0,.2);}@media(max-width:600px){img{margin:.5em auto;}}</style>



<body>
    <div id="header">
<h1 class="postTitle">Mysql 初阶</h1>
<div class="title-right">
    <a href="https://blog.adouzi.eu.org" id="buttonHome" class="btn btn-invisible circle" title="首页">
        <svg class="octicon" width="16" height="16">
            <path id="pathHome" fill-rule="evenodd"></path>
        </svg>
    </a>
    
    <a href="https://github.com/shiraayano/shiraayano.github.io/issues/47" target="_blank" class="btn btn-invisible circle" title="Issue">
        <svg class="octicon" width="16" height="16">
            <path id="pathIssue" fill-rule="evenodd"></path>
        </svg>
    </a>
    

    <a class="btn btn-invisible circle" onclick="modeSwitch();" title="切换主题">
        <svg class="octicon" width="16" height="16" >
            <path id="themeSwitch" fill-rule="evenodd"></path>
        </svg>
    </a>

</div>
</div>
    <div id="content">
<div class="markdown-body" id="postBody"><h3>MySQL</h3>
<ol>
<li><strong>SQL语言四大类别</strong>：
<ul>
<li><strong>DDL</strong>：用于定义数据库结构，如创建、修改、删除表。</li>
<li><strong>DML</strong>：用于操作数据，如插入、更新、删除记录。</li>
<li><strong>DQL</strong>：用于查询数据，如<code class="notranslate">SELECT</code>。</li>
<li><strong>DCL</strong>：用于控制访问权限，如授予、撤销权限。</li>
</ul>
</li>
<li><strong>字符集选择、数据类型转换、字段操作</strong>：
<ul>
<li>字符集选择影响数据存储与显示，常用的有UTF-8。</li>
<li>数据类型转换用于在不同类型之间转换。</li>
<li>字段操作包括修改字段类型、默认值和约束等。</li>
</ul>
</li>
<li><strong>数据库函数</strong>：
<ul>
<li><strong>字符串函数</strong>：处理字符串，如<code class="notranslate">CONCAT</code>、<code class="notranslate">SUBSTRING</code>。</li>
<li><strong>数值函数</strong>：处理数值，如<code class="notranslate">ROUND</code>、<code class="notranslate">ABS</code>。</li>
<li><strong>日期函数</strong>：处理日期时间，如<code class="notranslate">NOW</code>、<code class="notranslate">DATE_ADD</code>。</li>
<li><strong>流程函数</strong>：控制流程，如<code class="notranslate">IF</code>、<code class="notranslate">CASE</code>。</li>
</ul>
</li>
<li><strong>约束</strong>：
<ul>
<li><strong>非空约束</strong>：保证字段不为空。</li>
<li><strong>唯一约束</strong>：保证字段值唯一。</li>
<li><strong>主键约束</strong>：确保唯一标识每条记录。</li>
</ul>
</li>
<li><strong>多表查询</strong>：
<ul>
<li><strong>一对多</strong>、<strong>多对多</strong>、<strong>一对一</strong>：表之间的常见关系。</li>
<li><strong>连接查询</strong>：内连接、外连接、自连接。</li>
<li><strong>联合查询</strong>：合并多个查询结果。</li>
<li><strong>子查询</strong>：在查询中嵌套另一个查询。</li>
</ul>
</li>
<li><strong>事务</strong>：
<ul>
<li><strong>基本操作</strong>：包括<code class="notranslate">START TRANSACTION</code>、<code class="notranslate">COMMIT</code>、<code class="notranslate">ROLLBACK</code>。</li>
<li><strong>ACID特性</strong>：保证事务的原子性、一致性、隔离性和持久性。</li>
<li><strong>并发事务问题和隔离级别</strong>：解决脏读、不可重复读、幻读问题，常见隔离级别有<code class="notranslate">READ COMMITTED</code>、<code class="notranslate">REPEATABLE READ</code>、<code class="notranslate">SERIALIZABLE</code>。</li>
</ul>
</li>
</ol>
<p><a href="https://jimhackking.github.io/%E8%BF%90%E7%BB%B4/MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#%E6%9D%83%E9%99%90%E4%B8%80%E8%A7%88%E8%A1%A8" rel="nofollow">建议阅读</a></p>
<h3>MySQL数据库的SQL语言四大类别</h3>
<p>在MySQL数据库管理中，SQL（Structured Query Language）被划分为四大类别，每个类别包含不同的功能，旨在管理和操作数据库中的数据和结构。</p>
<ul>
<li>数据定义语言（DDL）</li>
<li>数据操作语言（DML）</li>
<li>数据查询语言（DQL）</li>
<li>控制语言（DCL）</li>
</ul>
<h4>1. 数据定义语言（DDL）</h4>
<p>DDL用于定义和管理数据库对象的结构，包括表、视图、索引等。主要命令包括：</p>
<ul>
<li><strong>CREATE</strong>：用于创建数据库和表等对象。</li>
<li><strong>ALTER</strong>：用于修改现有数据库对象的结构。</li>
<li><strong>DROP</strong>：用于删除数据库对象。</li>
</ul>
<p>示例：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">CREATE</span> <span class="pl-k">TABLE</span> <span class="pl-en">employees</span> (
    id <span class="pl-k">INT</span> <span class="pl-k">PRIMARY KEY</span>,
    name <span class="pl-k">VARCHAR</span>(<span class="pl-c1">50</span>),
    department <span class="pl-k">VARCHAR</span>(<span class="pl-c1">50</span>)
);</pre></div>
<h4>2. 数据操作语言（DML）</h4>
<p>DML用于操作数据库中的数据。主要命令包括：</p>
<ul>
<li><strong>INSERT</strong>：用于向表中插入数据。</li>
<li><strong>UPDATE</strong>：用于更新表中的现有数据。</li>
<li><strong>DELETE</strong>：用于删除表中的数据。</li>
</ul>
<p>示例：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">INSERT INTO</span> employees (id, name, department) <span class="pl-k">VALUES</span> (<span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">'</span>John Doe<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>HR<span class="pl-pds">'</span></span>);</pre></div>
<h4>3. 数据查询语言（DQL）</h4>
<p>DQL主要用于查询数据，核心命令是<strong>SELECT</strong>，用于从数据库中检索数据。通过结合WHERE、GROUP BY、HAVING等子句，可以构建复杂的查询。</p>
<p>示例：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">SELECT</span> name, department <span class="pl-k">FROM</span> employees <span class="pl-k">WHERE</span> department <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>HR<span class="pl-pds">'</span></span>;</pre></div>
<h4>4. 数据控制语言（DCL）</h4>
<p>DCL用于定义数据库的权限和安全设置，确保数据访问和使用的安全性。主要命令包括：</p>
<ul>
<li><strong>GRANT</strong>：用于授予用户特定的权限。</li>
<li><strong>REVOKE</strong>：用于撤销用户的权限。</li>
</ul>
<p>示例：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">GRANT</span> <span class="pl-k">SELECT</span>, INSERT <span class="pl-k">ON</span> employees TO <span class="pl-s"><span class="pl-pds">'</span>user1<span class="pl-pds">'</span></span>@<span class="pl-s"><span class="pl-pds">'</span>localhost<span class="pl-pds">'</span></span>;</pre></div>
<h3>MySQL数据库中的字符集选择、数据类型转换与字段操作</h3>
<h4>1. 字符集选择</h4>
<p>字符集决定了数据库中存储的字符的编码方式，不同的字符集支持不同的语言和符号。常用的字符集包括<code class="notranslate">utf8mb4</code>（支持多种语言和符号）和<code class="notranslate">latin1</code>（支持西欧语言）。</p>
<ul>
<li><strong>设置字符集</strong>：可以在创建数据库或表时指定字符集，也可以在连接时设置。</li>
<li><strong>更改字符集</strong>：使用<code class="notranslate">ALTER</code>命令可以更改现有表的字符集。</li>
</ul>
<p>示例：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">CREATE</span> <span class="pl-k">DATABASE</span> <span class="pl-en">mydb</span> CHARACTER <span class="pl-k">SET</span> utf8mb4;
<span class="pl-k">ALTER</span> <span class="pl-k">TABLE</span> employees <span class="pl-c1">CONVERT</span> TO CHARACTER <span class="pl-k">SET</span> utf8mb4;</pre></div>
<h4>2. 数据类型转换</h4>
<p>数据类型转换是指将一种数据类型转换为另一种数据类型。MySQL支持隐式和显式的数据类型转换。</p>
<ul>
<li><strong>隐式转换</strong>：当操作符或函数需要某种特定的数据类型时，MySQL会自动进行类型转换。</li>
<li><strong>显式转换</strong>：使用<code class="notranslate">CAST</code>或<code class="notranslate">CONVERT</code>函数可以明确地将数据转换为指定的数据类型。</li>
</ul>
<p>示例：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">SELECT</span> CAST(<span class="pl-s"><span class="pl-pds">'</span>123<span class="pl-pds">'</span></span> <span class="pl-k">AS</span> UNSIGNED); <span class="pl-c"><span class="pl-c">--</span> 将字符串转换为无符号整数</span>
<span class="pl-k">SELECT</span> <span class="pl-c1">CONVERT</span>(<span class="pl-s"><span class="pl-pds">'</span>2025-01-09<span class="pl-pds">'</span></span>, <span class="pl-k">DATE</span>); <span class="pl-c"><span class="pl-c">--</span> 将字符串转换为日期</span></pre></div>
<h4>3. 字段操作</h4>
<p>字段操作涉及表中的列（字段）的增删改等操作，确保表结构的灵活性和扩展性。</p>
<ul>
<li><strong>添加字段</strong>：使用<code class="notranslate">ALTER TABLE</code>命令添加新列。</li>
<li><strong>修改字段</strong>：可以更改字段的数据类型、默认值或其他属性。</li>
<li><strong>删除字段</strong>：删除不需要的字段。</li>
</ul>
<p>示例：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">ALTER</span> <span class="pl-k">TABLE</span> employees ADD COLUMN email <span class="pl-k">VARCHAR</span>(<span class="pl-c1">100</span>); <span class="pl-c"><span class="pl-c">--</span> 添加新字段</span>
<span class="pl-k">ALTER</span> <span class="pl-k">TABLE</span> employees MODIFY COLUMN name <span class="pl-k">VARCHAR</span>(<span class="pl-c1">100</span>); <span class="pl-c"><span class="pl-c">--</span> 修改字段类型</span>
<span class="pl-k">ALTER</span> <span class="pl-k">TABLE</span> employees DROP COLUMN department; <span class="pl-c"><span class="pl-c">--</span> 删除字段</span></pre></div>
<h3>函数</h3>
<p>MySQL提供了丰富的内置函数，帮助用户在数据库操作中进行字符串处理、数值运算、日期计算以及流程控制等多种任务。根据功能的不同，这些函数可分为四大类：字符串函数、数值函数、日期函数和流程函数。</p>
<h4>1. 字符串函数</h4>
<p>字符串函数用于对字符串进行处理和操作，例如提取子字符串、查找字符串长度、转换大小写等。</p>
<p>常用的字符串函数包括：</p>
<ul>
<li><code class="notranslate">**CONCAT()**</code>：连接两个或多个字符串。</li>
<li><code class="notranslate">**LENGTH()**</code>：返回字符串的长度（字符数）。</li>
<li><code class="notranslate">**SUBSTRING()**</code>：返回字符串的子串。</li>
<li><code class="notranslate">**UPPER()**</code>：将字符串转换为大写字母。</li>
<li><code class="notranslate">**LOWER()**</code>：将字符串转换为小写字母。</li>
<li><code class="notranslate">**TRIM()**</code>：去除字符串两端的空白字符。</li>
<li><code class="notranslate">**REPLACE()**</code>：替换字符串中的指定子字符串。</li>
</ul>
<p>示例：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">SELECT</span> CONCAT(<span class="pl-s"><span class="pl-pds">'</span>Hello<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span> <span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>World<span class="pl-pds">'</span></span>);  <span class="pl-c"><span class="pl-c">--</span> 输出：Hello World</span>
<span class="pl-k">SELECT</span> LENGTH(<span class="pl-s"><span class="pl-pds">'</span>MySQL<span class="pl-pds">'</span></span>);  <span class="pl-c"><span class="pl-c">--</span> 输出：5</span>
<span class="pl-k">SELECT</span> <span class="pl-c1">SUBSTRING</span>(<span class="pl-s"><span class="pl-pds">'</span>MySQL<span class="pl-pds">'</span></span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>);  <span class="pl-c"><span class="pl-c">--</span> 输出：ySQL</span>
<span class="pl-k">SELECT</span> <span class="pl-c1">UPPER</span>(<span class="pl-s"><span class="pl-pds">'</span>mysql<span class="pl-pds">'</span></span>);  <span class="pl-c"><span class="pl-c">--</span> 输出：MYSQL</span></pre></div>
<h4>2. 数值函数</h4>
<p>数值函数用于执行数值计算，如四则运算、取整、随机数生成等。</p>
<p>常用的数值函数包括：</p>
<ul>
<li><code class="notranslate">**ROUND()**</code>：对数值进行四舍五入。</li>
<li><code class="notranslate">**FLOOR()**</code>：返回小于或等于指定数值的最大整数。</li>
<li><code class="notranslate">**CEIL()**</code>：返回大于或等于指定数值的最小整数。</li>
<li><code class="notranslate">**RAND()**</code>：生成一个随机浮动值，通常用于生成随机数。</li>
<li><code class="notranslate">**ABS()**</code>：返回数值的绝对值。</li>
</ul>
<p>示例：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">SELECT</span> ROUND(<span class="pl-c1">123</span>.<span class="pl-c1">456</span>, <span class="pl-c1">2</span>);  <span class="pl-c"><span class="pl-c">--</span> 输出：123.46</span>
<span class="pl-k">SELECT</span> FLOOR(<span class="pl-c1">123</span>.<span class="pl-c1">456</span>);  <span class="pl-c"><span class="pl-c">--</span> 输出：123</span>
<span class="pl-k">SELECT</span> CEIL(<span class="pl-c1">123</span>.<span class="pl-c1">456</span>);  <span class="pl-c"><span class="pl-c">--</span> 输出：124</span>
<span class="pl-k">SELECT</span> RAND();  <span class="pl-c"><span class="pl-c">--</span> 输出：随机值，例如：0.487156</span>
<span class="pl-k">SELECT</span> ABS(<span class="pl-k">-</span><span class="pl-c1">100</span>);  <span class="pl-c"><span class="pl-c">--</span> 输出：100</span></pre></div>
<h4>3. 日期函数</h4>
<p>日期函数用于处理和操作日期和时间数据，常见的功能包括获取当前时间、日期加减、格式化日期等。</p>
<p>常用的日期函数包括：</p>
<ul>
<li><code class="notranslate">**NOW()**</code>：返回当前的日期和时间。</li>
<li><code class="notranslate">**CURDATE()**</code>：返回当前的日期。</li>
<li><code class="notranslate">**DATE_ADD()**</code>：向日期添加指定的时间间隔。</li>
<li><code class="notranslate">**DATE_SUB()**</code>：从日期中减去指定的时间间隔。</li>
<li><code class="notranslate">**YEAR()**</code>、<code class="notranslate">**MONTH()**</code>、<code class="notranslate">**DAY()**</code>：分别提取日期中的年、月、日部分。</li>
<li><code class="notranslate">**DATE_FORMAT()**</code>：格式化日期为指定的字符串格式。</li>
</ul>
<p>示例：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">SELECT</span> NOW();  <span class="pl-c"><span class="pl-c">--</span> 返回当前日期和时间，例如：2025-01-09 12:34:56</span>
<span class="pl-k">SELECT</span> CURDATE();  <span class="pl-c"><span class="pl-c">--</span> 返回当前日期，例如：2025-01-09</span>
<span class="pl-k">SELECT</span> DATE_ADD(<span class="pl-s"><span class="pl-pds">'</span>2025-01-09<span class="pl-pds">'</span></span>, INTERVAL <span class="pl-c1">1</span> DAY);  <span class="pl-c"><span class="pl-c">--</span> 输出：2025-01-10</span>
<span class="pl-k">SELECT</span> DATE_SUB(<span class="pl-s"><span class="pl-pds">'</span>2025-01-09<span class="pl-pds">'</span></span>, INTERVAL <span class="pl-c1">2</span> MONTH);  <span class="pl-c"><span class="pl-c">--</span> 输出：2024-11-09</span>
<span class="pl-k">SELECT</span> YEAR(<span class="pl-s"><span class="pl-pds">'</span>2025-01-09<span class="pl-pds">'</span></span>);  <span class="pl-c"><span class="pl-c">--</span> 输出：2025</span>
<span class="pl-k">SELECT</span> DATE_FORMAT(<span class="pl-s"><span class="pl-pds">'</span>2025-01-09<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>%Y-%m-%d<span class="pl-pds">'</span></span>);  <span class="pl-c"><span class="pl-c">--</span> 输出：2025-01-09</span></pre></div>
<h4>4. 流程函数</h4>
<p>流程控制函数用于在SQL查询中实现条件判断和流程控制，如判断语句、条件表达式等。</p>
<p>常用的流程函数包括：</p>
<ul>
<li><code class="notranslate">**IF()**</code>：用于根据条件执行不同的操作。</li>
<li><code class="notranslate">**CASE**</code>：根据不同的条件返回不同的结果（类似于<code class="notranslate">switch</code>语句）。</li>
<li><code class="notranslate">**COALESCE()**</code>：返回参数中第一个非空的值。</li>
<li><code class="notranslate">**NULLIF()**</code>：如果两个表达式相等，返回<code class="notranslate">NULL</code>，否则返回第一个表达式的值。</li>
</ul>
<p>示例：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">SELECT</span> IF(<span class="pl-c1">1</span> <span class="pl-k">&gt;</span> <span class="pl-c1">0</span>, <span class="pl-s"><span class="pl-pds">'</span>True<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>False<span class="pl-pds">'</span></span>);  <span class="pl-c"><span class="pl-c">--</span> 输出：True</span>
<span class="pl-k">SELECT</span> CASE WHEN age <span class="pl-k">&gt;=</span> <span class="pl-c1">18</span> THEN <span class="pl-s"><span class="pl-pds">'</span>Adult<span class="pl-pds">'</span></span> ELSE <span class="pl-s"><span class="pl-pds">'</span>Minor<span class="pl-pds">'</span></span> END <span class="pl-k">FROM</span> users;  <span class="pl-c"><span class="pl-c">--</span> 根据age字段判断</span>
<span class="pl-k">SELECT</span> COALESCE(<span class="pl-k">NULL</span>, <span class="pl-s"><span class="pl-pds">'</span>Default<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>Value<span class="pl-pds">'</span></span>);  <span class="pl-c"><span class="pl-c">--</span> 输出：Default</span>
<span class="pl-k">SELECT</span> NULLIF(<span class="pl-c1">10</span>, <span class="pl-c1">10</span>);  <span class="pl-c"><span class="pl-c">--</span> 输出：NULL</span></pre></div>
<h3></h3>
<h3>MySQL数据库中的约束</h3>
<p>在MySQL中，约束（Constraints）是用于限定表中数据的规则，确保数据的完整性和一致性。约束可以在创建表时定义，也可以在表创建后使用<code class="notranslate">ALTER TABLE</code>命令添加或修改。常见的约束有非空约束（<code class="notranslate">NOT NULL</code>）、唯一约束（<code class="notranslate">UNIQUE</code>）和主键约束（<code class="notranslate">PRIMARY KEY</code>）。</p>
<h4>1. 非空约束（<code class="notranslate">NOT NULL</code>）</h4>
<p>非空约束确保表中的某个字段在插入数据时不能为<code class="notranslate">NULL</code>。这意味着该字段必须包含有效的数据，不能为空。</p>
<ul>
<li><strong>作用</strong>：保证字段有值，避免出现无效或缺失的数据。</li>
<li><strong>应用场景</strong>：例如，要求每个员工必须有姓名、每个订单必须有订单号等。</li>
</ul>
<p><strong>示例</strong>：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">CREATE</span> <span class="pl-k">TABLE</span> <span class="pl-en">employees</span> (
    id <span class="pl-k">INT</span> <span class="pl-k">NOT NULL</span>,  <span class="pl-c"><span class="pl-c">--</span> 非空约束，id不能为空</span>
    name <span class="pl-k">VARCHAR</span>(<span class="pl-c1">50</span>) <span class="pl-k">NOT NULL</span>,  <span class="pl-c"><span class="pl-c">--</span> 非空约束，name不能为空</span>
    department <span class="pl-k">VARCHAR</span>(<span class="pl-c1">50</span>)
);</pre></div>
<p>如果尝试插入<code class="notranslate">NULL</code>值，系统会报错：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">INSERT INTO</span> employees (id, name) <span class="pl-k">VALUES</span> (<span class="pl-c1">1</span>, <span class="pl-k">NULL</span>);  <span class="pl-c"><span class="pl-c">--</span> 报错，name不能为空</span></pre></div>
<h4>2. 唯一约束（<code class="notranslate">UNIQUE</code>）</h4>
<p>唯一约束确保字段中的所有值都是唯一的，即该字段中的每个数据值不能重复。唯一约束允许字段中的值为<code class="notranslate">NULL</code>，但如果字段不为空，则每个值都必须是唯一的。</p>
<ul>
<li><strong>作用</strong>：确保数据表中某一字段的数据不重复，避免出现重复记录。</li>
<li><strong>应用场景</strong>：例如，要求每个电子邮件地址必须是唯一的，或者每个身份证号不能重复。</li>
</ul>
<p><strong>示例</strong>：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">CREATE</span> <span class="pl-k">TABLE</span> <span class="pl-en">employees</span> (
    id <span class="pl-k">INT</span> <span class="pl-k">PRIMARY KEY</span>,
    email <span class="pl-k">VARCHAR</span>(<span class="pl-c1">100</span>) UNIQUE  <span class="pl-c"><span class="pl-c">--</span> 唯一约束，email不能重复</span>
);</pre></div>
<p>在插入数据时，如果试图插入重复的<code class="notranslate">email</code>值，系统会报错：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">INSERT INTO</span> employees (id, email) <span class="pl-k">VALUES</span> (<span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">'</span>john.doe@example.com<span class="pl-pds">'</span></span>);
<span class="pl-k">INSERT INTO</span> employees (id, email) <span class="pl-k">VALUES</span> (<span class="pl-c1">2</span>, <span class="pl-s"><span class="pl-pds">'</span>john.doe@example.com<span class="pl-pds">'</span></span>);  <span class="pl-c"><span class="pl-c">--</span> 报错，email值重复</span></pre></div>
<h4>3. 主键约束（<code class="notranslate">PRIMARY KEY</code>）</h4>
<p>主键约束是唯一约束的特殊形式。主键是表中用来唯一标识每一条记录的字段或字段组合。主键约束要求字段值必须唯一，并且不能为空。每个表只能有一个主键。</p>
<ul>
<li><strong>作用</strong>：主键确保表中的每一行数据都有唯一标识，并且不允许为<code class="notranslate">NULL</code>。</li>
<li><strong>应用场景</strong>：例如，要求每个员工必须有唯一的员工编号，或者每个订单必须有唯一的订单号。</li>
</ul>
<p><strong>示例</strong>：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">CREATE</span> <span class="pl-k">TABLE</span> <span class="pl-en">employees</span> (
    id <span class="pl-k">INT</span> <span class="pl-k">NOT NULL</span>,
    name <span class="pl-k">VARCHAR</span>(<span class="pl-c1">50</span>),
    department <span class="pl-k">VARCHAR</span>(<span class="pl-c1">50</span>),
    <span class="pl-k">PRIMARY KEY</span> (id)  <span class="pl-c"><span class="pl-c">--</span> id列是主键，不能重复并且不能为NULL</span>
);</pre></div>
<p>在插入数据时，如果试图插入重复的主键值或<code class="notranslate">NULL</code>值，系统会报错：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">INSERT INTO</span> employees (id, name, department) <span class="pl-k">VALUES</span> (<span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">'</span>John Doe<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>HR<span class="pl-pds">'</span></span>);
<span class="pl-k">INSERT INTO</span> employees (id, name, department) <span class="pl-k">VALUES</span> (<span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">'</span>Jane Doe<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>Finance<span class="pl-pds">'</span></span>);  <span class="pl-c"><span class="pl-c">--</span> 报错，主键冲突</span></pre></div>
<h3>总结</h3>
<ul>
<li><strong>非空约束</strong>：确保字段不能有<code class="notranslate">NULL</code>值，保证数据的完整性。</li>
<li><strong>唯一约束</strong>：确保字段中的值唯一，防止重复记录。</li>
<li><strong>主键约束</strong>：不仅保证字段值唯一，而且字段值不能为空，通常用于唯一标识记录。</li>
</ul>
<h3>MySQL数据库中的多表查询</h3>
<p>在实际应用中，数据库表之间的关系非常常见，MySQL提供了丰富的多表查询功能，用于处理表与表之间的各种关系。常见的多表查询类型包括一对多关系、多对多关系、一对一关系，以及各种连接查询（内连接、外连接、自连接）和联合查询、子查询等。以下是这些查询的详细介绍：</p>
<h4>1. 一对多关系（One-to-Many）</h4>
<p>一对多关系指的是一个表中的一条记录可以与另一个表中的多条记录相关联。通常在一对多关系中，"一"的一方是主表，"多"的一方是从表。</p>
<p>例如，假设有两个表：<code class="notranslate">departments</code>（部门表）和<code class="notranslate">employees</code>（员工表）。每个部门有多个员工，但每个员工只属于一个部门。</p>
<p><strong>表结构</strong>：</p>
<ul>
<li><code class="notranslate">departments</code>表：存储部门信息（<code class="notranslate">department_id</code>、<code class="notranslate">department_name</code>）。</li>
<li><code class="notranslate">employees</code>表：存储员工信息（<code class="notranslate">employee_id</code>、<code class="notranslate">employee_name</code>、<code class="notranslate">department_id</code>）。</li>
</ul>
<p><strong>查询示例</strong>：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">SELECT</span> <span class="pl-c1">e</span>.<span class="pl-c1">employee_name</span>, <span class="pl-c1">d</span>.<span class="pl-c1">department_name</span>
<span class="pl-k">FROM</span> employees e
<span class="pl-k">JOIN</span> departments d <span class="pl-k">ON</span> <span class="pl-c1">e</span>.<span class="pl-c1">department_id</span> <span class="pl-k">=</span> <span class="pl-c1">d</span>.<span class="pl-c1">department_id</span>;</pre></div>
<p>这个查询返回所有员工及其所属部门的信息，其中每个部门可以有多个员工。</p>
<h4>2. 多对多关系（Many-to-Many）</h4>
<p>多对多关系指的是表与表之间的关系非常复杂，一条记录可以与另一表中的多条记录关联，反之亦然。通常，需要通过一个中间表来表示这种关系。</p>
<p>例如，假设有三个表：<code class="notranslate">students</code>（学生表）、<code class="notranslate">courses</code>（课程表）和<code class="notranslate">student_courses</code>（学生选课表）。一个学生可以选修多门课程，而每门课程可以被多个学生选修。</p>
<p><strong>表结构</strong>：</p>
<ul>
<li><code class="notranslate">students</code>表：存储学生信息（<code class="notranslate">student_id</code>、<code class="notranslate">student_name</code>）。</li>
<li><code class="notranslate">courses</code>表：存储课程信息（<code class="notranslate">course_id</code>、<code class="notranslate">course_name</code>）。</li>
<li><code class="notranslate">student_courses</code>表：存储学生和课程之间的关系（<code class="notranslate">student_id</code>、<code class="notranslate">course_id</code>）。</li>
</ul>
<p><strong>查询示例</strong>：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">SELECT</span> <span class="pl-c1">s</span>.<span class="pl-c1">student_name</span>, <span class="pl-c1">c</span>.<span class="pl-c1">course_name</span>
<span class="pl-k">FROM</span> students s
<span class="pl-k">JOIN</span> student_courses sc <span class="pl-k">ON</span> <span class="pl-c1">s</span>.<span class="pl-c1">student_id</span> <span class="pl-k">=</span> <span class="pl-c1">sc</span>.<span class="pl-c1">student_id</span>
<span class="pl-k">JOIN</span> courses c <span class="pl-k">ON</span> <span class="pl-c1">sc</span>.<span class="pl-c1">course_id</span> <span class="pl-k">=</span> <span class="pl-c1">c</span>.<span class="pl-c1">course_id</span>;</pre></div>
<p>该查询返回每个学生选修的课程信息，其中每个学生可以选修多门课程，且每门课程也可以有多个学生。</p>
<h4>3. 一对一关系（One-to-One）</h4>
<p>一对一关系指的是两个表中的一条记录只能与另一个表中的一条记录关联。例如，假设有<code class="notranslate">employees</code>（员工表）和<code class="notranslate">employee_details</code>（员工详细信息表），每个员工在<code class="notranslate">employee_details</code>表中只有一条记录，反之亦然。</p>
<p><strong>表结构</strong>：</p>
<ul>
<li><code class="notranslate">employees</code>表：存储员工信息（<code class="notranslate">employee_id</code>、<code class="notranslate">employee_name</code>）。</li>
<li><code class="notranslate">employee_details</code>表：存储员工详细信息（<code class="notranslate">employee_id</code>、<code class="notranslate">address</code>、<code class="notranslate">phone_number</code>）。</li>
</ul>
<p><strong>查询示例</strong>：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">SELECT</span> <span class="pl-c1">e</span>.<span class="pl-c1">employee_name</span>, <span class="pl-c1">ed</span>.<span class="pl-c1">address</span>, <span class="pl-c1">ed</span>.<span class="pl-c1">phone_number</span>
<span class="pl-k">FROM</span> employees e
<span class="pl-k">JOIN</span> employee_details ed <span class="pl-k">ON</span> <span class="pl-c1">e</span>.<span class="pl-c1">employee_id</span> <span class="pl-k">=</span> <span class="pl-c1">ed</span>.<span class="pl-c1">employee_id</span>;</pre></div>
<p>该查询返回每个员工及其详细信息，其中每个员工只有一个对应的详细信息记录。</p>
<h4>4. 内连接查询（INNER JOIN）</h4>
<p>内连接查询用于返回两个表中符合连接条件的记录。如果两个表中的记录没有匹配项，则该记录不会出现在查询结果中。</p>
<p><strong>查询示例</strong>：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">SELECT</span> <span class="pl-c1">e</span>.<span class="pl-c1">employee_name</span>, <span class="pl-c1">d</span>.<span class="pl-c1">department_name</span>
<span class="pl-k">FROM</span> employees e
<span class="pl-k">INNER JOIN</span> departments d <span class="pl-k">ON</span> <span class="pl-c1">e</span>.<span class="pl-c1">department_id</span> <span class="pl-k">=</span> <span class="pl-c1">d</span>.<span class="pl-c1">department_id</span>;</pre></div>
<p>这个查询只会返回那些员工与部门匹配的记录（即<code class="notranslate">employee_id</code>与<code class="notranslate">department_id</code>匹配的记录）。</p>
<h4>5. 外连接查询（OUTER JOIN）</h4>
<p>外连接查询返回两个表中的所有记录，即使某些记录在一个表中没有匹配项。外连接分为左外连接（<code class="notranslate">LEFT JOIN</code>）、右外连接（<code class="notranslate">RIGHT JOIN</code>）和完全外连接（<code class="notranslate">FULL OUTER JOIN</code>，在MySQL中需要用<code class="notranslate">UNION</code>模拟）。</p>
<ul>
<li><strong>左外连接（</strong><code class="notranslate">**LEFT JOIN**</code><strong>）</strong>：返回左表中的所有记录，以及右表中匹配的记录。如果右表中没有匹配项，结果中右表的列将显示<code class="notranslate">NULL</code>。</li>
<li><strong>右外连接（</strong><code class="notranslate">**RIGHT JOIN**</code><strong>）</strong>：返回右表中的所有记录，以及左表中匹配的记录。如果左表中没有匹配项，结果中左表的列将显示<code class="notranslate">NULL</code>。</li>
</ul>
<p><strong>查询示例</strong>：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-c"><span class="pl-c">--</span> 左外连接</span>
<span class="pl-k">SELECT</span> <span class="pl-c1">e</span>.<span class="pl-c1">employee_name</span>, <span class="pl-c1">d</span>.<span class="pl-c1">department_name</span>
<span class="pl-k">FROM</span> employees e
<span class="pl-k">LEFT JOIN</span> departments d <span class="pl-k">ON</span> <span class="pl-c1">e</span>.<span class="pl-c1">department_id</span> <span class="pl-k">=</span> <span class="pl-c1">d</span>.<span class="pl-c1">department_id</span>;

<span class="pl-c"><span class="pl-c">--</span> 右外连接</span>
<span class="pl-k">SELECT</span> <span class="pl-c1">e</span>.<span class="pl-c1">employee_name</span>, <span class="pl-c1">d</span>.<span class="pl-c1">department_name</span>
<span class="pl-k">FROM</span> employees e
<span class="pl-k">RIGHT JOIN</span> departments d <span class="pl-k">ON</span> <span class="pl-c1">e</span>.<span class="pl-c1">department_id</span> <span class="pl-k">=</span> <span class="pl-c1">d</span>.<span class="pl-c1">department_id</span>;</pre></div>
<h4>6. 自连接查询（Self Join）</h4>
<p>自连接查询是指同一表与其自身进行连接。这种查询通常用于查找表中记录之间的关系，比如员工表中的经理与员工之间的关系。</p>
<p><strong>查询示例</strong>：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">SELECT</span> <span class="pl-c1">e1</span>.<span class="pl-c1">employee_name</span> <span class="pl-k">AS</span> Employee, <span class="pl-c1">e2</span>.<span class="pl-c1">employee_name</span> <span class="pl-k">AS</span> Manager
<span class="pl-k">FROM</span> employees e1
<span class="pl-k">JOIN</span> employees e2 <span class="pl-k">ON</span> <span class="pl-c1">e1</span>.<span class="pl-c1">manager_id</span> <span class="pl-k">=</span> <span class="pl-c1">e2</span>.<span class="pl-c1">employee_id</span>;</pre></div>
<p>这个查询返回所有员工及其经理的名称，其中<code class="notranslate">e1</code>是员工表的别名，<code class="notranslate">e2</code>是经理表的别名，<code class="notranslate">manager_id</code>表示经理的<code class="notranslate">employee_id</code>。</p>
<h4>7. 联合查询（UNION）</h4>
<p>联合查询用于将多个<code class="notranslate">SELECT</code>查询的结果合并为一个结果集。使用<code class="notranslate">UNION</code>时，所有的查询列数和列类型必须一致。<code class="notranslate">UNION</code>会去除重复的记录，若需要包括重复记录，可以使用<code class="notranslate">UNION ALL</code>。</p>
<p><strong>查询示例</strong>：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">SELECT</span> employee_name <span class="pl-k">FROM</span> employees
<span class="pl-k">UNION</span>
<span class="pl-k">SELECT</span> department_name <span class="pl-k">FROM</span> departments;</pre></div>
<p>该查询将返回员工名称和部门名称的并集。</p>
<h4>8. 子查询（Subquery）</h4>
<p>子查询是在一个查询中嵌套另一个查询，子查询可以出现在<code class="notranslate">SELECT</code>、<code class="notranslate">FROM</code>、<code class="notranslate">WHERE</code>等子句中。子查询可以是单行子查询、多行子查询或相关子查询。</p>
<p><strong>查询示例</strong>：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-c"><span class="pl-c">--</span> 单行子查询</span>
<span class="pl-k">SELECT</span> employee_name
<span class="pl-k">FROM</span> employees
<span class="pl-k">WHERE</span> department_id <span class="pl-k">=</span> (<span class="pl-k">SELECT</span> department_id <span class="pl-k">FROM</span> departments <span class="pl-k">WHERE</span> department_name <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>HR<span class="pl-pds">'</span></span>);

<span class="pl-c"><span class="pl-c">--</span> 多行子查询</span>
<span class="pl-k">SELECT</span> employee_name
<span class="pl-k">FROM</span> employees
<span class="pl-k">WHERE</span> department_id <span class="pl-k">IN</span> (<span class="pl-k">SELECT</span> department_id <span class="pl-k">FROM</span> departments <span class="pl-k">WHERE</span> department_name <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>HR<span class="pl-pds">'</span></span>);</pre></div>
<p>上面的查询会返回所有在<code class="notranslate">HR</code>部门的员工。</p>
<h3>总结</h3>
<ul>
<li><strong>一对多关系</strong>：通过连接表和外键关系来查询一个表与另一个表之间的多对多关系。</li>
<li><strong>多对多关系</strong>：通过中间表来实现，通常用于处理涉及多个实体的复杂关联。</li>
<li><strong>一对一关系</strong>：通常通过共享主键来建立一对一关系，适用于存储一对一相关的数据。</li>
<li><strong>内连接（INNER JOIN）</strong>：返回两个表中匹配的记录。</li>
<li><strong>外连接（OUTER JOIN）</strong>：返回一个表中的所有记录及另一个表中匹配的记录，包括没有匹配项的记录。</li>
<li><strong>自连接（SELF JOIN）</strong>：同一表与自身进行连接，适用于处理表中记录之间的关联。</li>
<li><strong>联合查询（UNION）</strong>：将多个查询结果合并为一个结果集，默认去除重复记录。</li>
<li><strong>子查询（SUBQUERY）</strong>：将一个查询嵌套在另一个查询中，用于复杂的查询逻辑。</li>
</ul>
<h3>MySQL数据库中的事务</h3>
<p>事务（Transaction）是一个逻辑上的工作单位，由一系列的数据库操作组成，这些操作要么全部成功执行，要么全部回滚。事务的主要目的是确保数据的一致性、完整性和可靠性。MySQL支持事务处理，它可以让用户在多个操作之间实现原子性、持久性等特性，从而保证数据的准确性和一致性。</p>
<h4>1. 基本操作</h4>
<p>MySQL的事务操作包括<code class="notranslate">START TRANSACTION</code>、<code class="notranslate">COMMIT</code>、<code class="notranslate">ROLLBACK</code>等。通过这些操作，用户可以启动一个事务、提交事务或回滚事务。</p>
<ul>
<li><code class="notranslate">**START TRANSACTION**</code>：启动一个新的事务。</li>
<li><code class="notranslate">**COMMIT**</code>：提交事务，意味着将事务中的所有更改永久保存到数据库。</li>
<li><code class="notranslate">**ROLLBACK**</code>：回滚事务，意味着撤销事务中的所有更改，恢复到事务开始之前的状态。</li>
</ul>
<p><strong>示例</strong>：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">START TRANSACTION</span>;  <span class="pl-c"><span class="pl-c">--</span> 开始事务</span>

<span class="pl-k">UPDATE</span> accounts <span class="pl-k">SET</span> balance <span class="pl-k">=</span> balance <span class="pl-k">-</span> <span class="pl-c1">100</span> <span class="pl-k">WHERE</span> account_id <span class="pl-k">=</span> <span class="pl-c1">1</span>;  <span class="pl-c"><span class="pl-c">--</span> 从账户1扣款</span>
<span class="pl-k">UPDATE</span> accounts <span class="pl-k">SET</span> balance <span class="pl-k">=</span> balance <span class="pl-k">+</span> <span class="pl-c1">100</span> <span class="pl-k">WHERE</span> account_id <span class="pl-k">=</span> <span class="pl-c1">2</span>;  <span class="pl-c"><span class="pl-c">--</span> 向账户2存款</span>

<span class="pl-k">COMMIT</span>;  <span class="pl-c"><span class="pl-c">--</span> 提交事务</span></pre></div>
<p>如果在执行过程中出现错误，需要回滚事务：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">START TRANSACTION</span>;  <span class="pl-c"><span class="pl-c">--</span> 开始事务</span>

<span class="pl-k">UPDATE</span> accounts <span class="pl-k">SET</span> balance <span class="pl-k">=</span> balance <span class="pl-k">-</span> <span class="pl-c1">100</span> <span class="pl-k">WHERE</span> account_id <span class="pl-k">=</span> <span class="pl-c1">1</span>;  <span class="pl-c"><span class="pl-c">--</span> 从账户1扣款</span>
<span class="pl-k">UPDATE</span> accounts <span class="pl-k">SET</span> balance <span class="pl-k">=</span> balance <span class="pl-k">+</span> <span class="pl-c1">100</span> <span class="pl-k">WHERE</span> account_id <span class="pl-k">=</span> <span class="pl-c1">2</span>;  <span class="pl-c"><span class="pl-c">--</span> 向账户2存款</span>

<span class="pl-k">ROLLBACK</span>;  <span class="pl-c"><span class="pl-c">--</span> 回滚事务，撤销所有更改</span></pre></div>
<h4>2. ACID特性</h4>
<p>事务的四个基本特性被称为ACID特性，它们是保证事务可靠性的核心标准。ACID是以下四个英文单词的缩写：</p>
<ul>
<li><strong>原子性（Atomicity）</strong>：事务中的操作要么全部成功，要么全部失败。事务不可分割，不能出现部分提交的情况。即使在操作过程中发生故障，系统也会恢复到事务开始之前的状态。</li>
<li><strong>一致性（Consistency）</strong>：事务执行前后，数据库必须保持一致的状态。每个事务在执行时必须从一个一致的数据库状态转移到另一个一致的数据库状态。</li>
<li><strong>隔离性（Isolation）</strong>：每个事务的执行不应受到其他事务的干扰。即使多个事务并发执行，每个事务也应像是独立执行一样，互不影响。</li>
<li><strong>持久性（Durability）</strong>：事务一旦提交，其结果就会永久保存到数据库中，不会因为系统崩溃或故障而丢失。</li>
</ul>
<p><strong>ACID特性示例</strong>：</p>
<ul>
<li><strong>原子性</strong>：假设某个事务涉及到两次操作（扣款和存款）。如果其中一次操作失败（比如扣款失败），整个事务会回滚，恢复到原始状态（即没有执行扣款和存款操作）。</li>
<li><strong>一致性</strong>：如果银行账户操作符合一定规则（如账户余额不能为负），事务执行后，系统仍然满足这些规则。</li>
<li><strong>隔离性</strong>：即使两个用户同时操作相同的数据（如转账），每个用户的操作都不会干扰到另一个用户的事务。</li>
<li><strong>持久性</strong>：即使系统崩溃，已提交的转账记录仍然能够被保存并恢复。</li>
</ul>
<h4>3. 并发事务问题和隔离级别</h4>
<p>在数据库中，当多个事务并发执行时，可能会出现并发事务问题，例如脏读、不可重复读和幻读。为了避免这些问题，数据库提供了隔离级别（Isolation Levels）来控制并发事务的行为。</p>
<p><strong>并发事务问题</strong>：</p>
<ul>
<li><strong>脏读（Dirty Read）</strong>：一个事务读取了另一个事务未提交的数据。</li>
<li><strong>不可重复读（Non-repeatable Read）</strong>：一个事务在执行过程中，另一个事务修改了正在读取的数据，导致数据不一致。</li>
<li><strong>幻读（Phantom Read）</strong>：一个事务在读取数据集时，另一个事务插入了新的数据，导致查询结果发生变化。</li>
</ul>
<p><strong>事务隔离级别</strong>： MySQL支持四种事务隔离级别，每种隔离级别提供不同程度的并发控制，从而影响事务的执行效率和数据一致性。</p>
<ol>
<li><strong>READ UNCOMMITTED（读未提交）</strong>：
<ul>
<li>在这个隔离级别，事务可以读取其他事务未提交的数据（脏读）。这是最不严格的隔离级别。</li>
<li>可能出现脏读、不可重复读和幻读问题。</li>
</ul>
</li>
</ol>
<p><strong>示例</strong>：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">SET</span> TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;</pre></div>
<ol start="2">
<li><strong>READ COMMITTED（读已提交）</strong>：
<ul>
<li>在这个隔离级别，事务只能读取已提交的数据（防止脏读）。但是，仍然可能出现不可重复读。</li>
<li>这种隔离级别避免了脏读，但无法避免不可重复读和幻读问题。</li>
</ul>
</li>
</ol>
<p><strong>示例</strong>：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">SET</span> TRANSACTION ISOLATION LEVEL READ COMMITTED;</pre></div>
<ol start="3">
<li><strong>REPEATABLE READ（可重复读）</strong>：
<ul>
<li>在这个隔离级别，事务中读取的数据在整个事务期间都是一致的（防止不可重复读）。但是，可能会出现幻读问题。</li>
<li>这是MySQL的默认隔离级别，能够防止脏读和不可重复读，但幻读问题仍然存在。</li>
</ul>
</li>
</ol>
<p><strong>示例</strong>：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">SET</span> TRANSACTION ISOLATION LEVEL REPEATABLE READ;</pre></div>
<ol start="4">
<li><strong>SERIALIZABLE（可串行化）</strong>：
<ul>
<li>在这个隔离级别，事务强制按照顺序执行，完全避免了脏读、不可重复读和幻读问题。每个事务的执行会被其他事务完全隔离。</li>
<li>这是最严格的隔离级别，能够提供完全的数据一致性，但性能较低。</li>
</ul>
</li>
</ol>
<p><strong>示例</strong>：</p>
<div class="highlight highlight-source-sql"><pre class="notranslate"><span class="pl-k">SET</span> TRANSACTION ISOLATION LEVEL SERIALIZABLE;</pre></div>
<p><strong>隔离级别的选择</strong>：</p>
<ul>
<li><strong>性能与一致性的权衡</strong>：越高的隔离级别通常会带来更强的数据一致性保障，但也会导致更低的并发性能。因此，选择合适的隔离级别需要权衡性能和数据一致性。</li>
<li><strong>默认隔离级别</strong>：在MySQL中，默认的隔离级别是<code class="notranslate">REPEATABLE READ</code>，它能够防止脏读和不可重复读。</li>
</ul>
<h3>总结</h3>
<ul>
<li><strong>基本操作</strong>：通过<code class="notranslate">START TRANSACTION</code>、<code class="notranslate">COMMIT</code>和<code class="notranslate">ROLLBACK</code>控制事务的开始、提交和回滚。</li>
<li><strong>ACID特性</strong>：确保事务具备原子性、一致性、隔离性和持久性，从而保证数据的可靠性和一致性。</li>
<li><strong>并发事务问题</strong>：可能出现脏读、不可重复读和幻读等问题，通过合理选择事务隔离级别可以解决这些问题。</li>
<li><strong>事务隔离级别</strong>：包括<code class="notranslate">READ UNCOMMITTED</code>、<code class="notranslate">READ COMMITTED</code>、<code class="notranslate">REPEATABLE READ</code>和<code class="notranslate">SERIALIZABLE</code>四种，隔离级别越高，数据一致性越强，但性能可能降低。</li>
</ul>
<p>MySQL中SQL语句的书写顺序和执行顺序：<br>
书写顺序<br>
SELECT：选择要返回的列。<br>
FROM：指定查询的表。<br>
JOIN：表连接操作。<br>
WHERE：过滤条件。<br>
GROUP BY：分组条件。<br>
HAVING：分组后的过滤条件。<br>
ORDER BY：排序条件。<br>
LIMIT：限制返回的行数。<br>
执行顺序<br>
FROM：确定查询的表。<br>
JOIN：表连接操作。<br>
WHERE：过滤条件。<br>
GROUP BY：分组条件。<br>
HAVING：分组后的过滤条件。<br>
SELECT：选择要返回的列。<br>
ORDER BY：排序条件。<br>
LIMIT：限制返回的行数。<br>
为什么不同<br>
性能优化：先处理FROM、JOIN和WHERE可以减少需要处理的数据量，提高查询效率。<br>
逻辑依赖：GROUP BY和HAVING需要在数据已经过滤和连接之后才能生效。</p></div>
<div style="font-size:small;margin-top:8px;float:right;"><footer style="padding:10px 15px;text-align:left;font-size:14px;color:#555;border-top:1px solid #e0e0e0;line-height:1.8;font-family:Arial,sans-serif"><span>注意：转载请注明出处 <br> 转载请先阅读以下文章 </span><a href="https://blog.adouzi.eu.org/post/21.html" style="color:#0078d7;text-decoration:none">关于博客文章转载规则以及一些闲聊</a> <br><br> <span>  个人主页：<a href="https://adouzi.eu.org" style="color:#0078d7;text-decoration:none">https://adouzi.eu.org</a></span><span> | Email：<a href="mailto:shiraayano@adouzi.eu.org" style="color:#0078d7;text-decoration:none">shiraayano@adouzi.eu.org</a><br><br><br>支持笔者：<a href="https://www.profitableratecpm.com/euxxr69t?key=f815bdc51cd258ab9f699175b0ef4446" style="color:#0078d7;text-decoration:none">点击广告</a><br>广告收入是本站唯一的收入，若本站内容帮到了您，可以点击广告支持笔者。</span><script async data-cfasync="false" src="//pl27420049.profitableratecpm.com/0f4f9e716ea5257a380097bb2d39a0bb/invoke.js"></script><div id="container-0f4f9e716ea5257a380097bb2d39a0bb"></div><br><script type="text/javascript">
atOptions = {
	'key' : '7a765266e94fd2cc53f429f1806bfa33',
	'format' : 'iframe',
	'height' : 90,
	'width' : 728,
	'params' : {}
}; </script><script type='text/javascript' src='//www.highperformanceformat.com/7a765266e94fd2cc53f429f1806bfa33/invoke.js'></script></footer></div>

<button class="btn btn-block" type="button" onclick="openComments()" id="cmButton">评论</button>
<div class="comments" id="comments"></div>

</div>
    <div id="footer"><div id="footer1">Copyright © <span id="copyrightYear"></span> <a href="https://blog.adouzi.eu.org">白綾乃的博客</a></div>
<div id="footer2"><span id="filingNum"><a href="https://beian.miit.gov.cn/" target="_blank"><a href='https://icp.gov.moe/?keyword=20240287' target='_blank'>萌ICP备20240287号</a></a> • </span>
    <span id="runday"></span><span>Powered by <a href="https://meekdai.com/Gmeek.html" target="_blank">Gmeek</a></span>
</div>

<script>
var now=new Date();
document.getElementById("copyrightYear").innerHTML=now.getFullYear();

if("07/12/2024"!=""){
    var startSite=new Date("07/12/2024");
    var diff=now.getTime()-startSite.getTime();
    var diffDay=Math.floor(diff/(1000*60*60*24));
    document.getElementById("runday").innerHTML="网站运行"+diffDay+"天"+" • ";
}
</script></div>
</body>
<script>
var IconList={'sun': 'M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z', 'moon': 'M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z', 'sync': 'M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z', 'home': 'M6.906.664a1.749 1.749 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z', 'github': 'M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z', 'copy': 'M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z', 'check': 'M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'};
var utterancesLoad=0;

let themeSettings={
    "dark": ["dark","moon","#00f0ff","dark-blue"],
    "light": ["light","sun","#ff5000","github-light"],
    "auto": ["auto","sync","","preferred-color-scheme"]
};
function changeTheme(mode, icon, color, utheme){
    document.documentElement.setAttribute("data-color-mode",mode);
    document.getElementById("themeSwitch").setAttribute("d",value=IconList[icon]);
    document.getElementById("themeSwitch").parentNode.style.color=color;
    if(utterancesLoad==1){utterancesTheme(utheme);}
}
function modeSwitch(){
    let currentMode=document.documentElement.getAttribute('data-color-mode');
    let newMode = currentMode === "light" ? "dark" : currentMode === "dark" ? "auto" : "light";
    localStorage.setItem("meek_theme", newMode);
    if(themeSettings[newMode]){
        changeTheme(...themeSettings[newMode]);
    }
}
function utterancesTheme(theme){
    const message={type:'set-theme',theme: theme};
    const iframe=document.getElementsByClassName('utterances-frame')[0];
    iframe.contentWindow.postMessage(message,'https://utteranc.es');
}
if(themeSettings[theme]){changeTheme(...themeSettings[theme]);}
console.log("\n %c Gmeek last https://github.com/Meekdai/Gmeek \n","padding:5px 0;background:#02d81d;color:#fff");
</script>

<script>
document.getElementById("pathHome").setAttribute("d",IconList["home"]);
document.getElementById("pathIssue").setAttribute("d",IconList["github"]);



function openComments(){
    cm=document.getElementById("comments");
    cmButton=document.getElementById("cmButton");
    cmButton.innerHTML="loading";
    span=document.createElement("span");
    span.setAttribute("class","AnimatedEllipsis");
    cmButton.appendChild(span);

    script=document.createElement("script");
    script.setAttribute("src","https://utteranc.es/client.js");
    script.setAttribute("repo","shiraayano/shiraayano.github.io");
    script.setAttribute("issue-term","title");
    
    if(localStorage.getItem("meek_theme")=="dark"){script.setAttribute("theme","dark-blue");}
    else if(localStorage.getItem("meek_theme")=="light") {script.setAttribute("theme","github-light");}
    else{script.setAttribute("theme","preferred-color-scheme");}
    
    script.setAttribute("crossorigin","anonymous");
    script.setAttribute("async","");
    cm.appendChild(script);

    int=self.setInterval("iFrameLoading()",200);
}

function iFrameLoading(){
    var utterances=document.getElementsByClassName('utterances');
    if(utterances.length==1){
        if(utterances[0].style.height!=""){
            utterancesLoad=1;
            int=window.clearInterval(int);
            document.getElementById("cmButton").style.display="none";
            console.log("utterances Load OK");
        }
    }
}

document.addEventListener('DOMContentLoaded', () => {
    const createClipboardHTML = (codeContent, additionalClasses = '') => `
        <pre class="notranslate"><code class="notranslate">${codeContent}</code></pre>
        <div class="clipboard-container position-absolute right-0 top-0 ${additionalClasses}">
            <clipboard-copy class="ClipboardButton btn m-2 p-0" role="button" style="display: inherit;">
                <svg height="16" width="16" class="octicon octicon-copy m-2"><path d="${IconList["copy"]}"></path></svg>
                <svg height="16" width="16" class="octicon octicon-check color-fg-success m-2 d-none"><path d="${IconList["check"]}"></path></svg>
            </clipboard-copy>
            <div class="copy-feedback">Copied!</div>
        </div>
    `;

    const handleCodeElements = (selector = '') => {
        document.querySelectorAll(selector).forEach(codeElement => {
            const codeContent = codeElement.innerHTML;
            const newStructure = document.createElement('div');
            newStructure.className = 'snippet-clipboard-content position-relative overflow-auto';
            newStructure.innerHTML = createClipboardHTML(codeContent);

            const parentElement = codeElement.parentElement;
            if (selector.includes('highlight')) {
                parentElement.insertBefore(newStructure, codeElement.nextSibling);
                parentElement.removeChild(codeElement);
            } else {
                parentElement.parentElement.replaceChild(newStructure, parentElement);
            }
        });
    };

    handleCodeElements('pre.notranslate > code.notranslate');
    handleCodeElements('div.highlight > pre.notranslate');

    let currentFeedback = null;
    document.querySelectorAll('clipboard-copy').forEach(copyButton => {
        copyButton.addEventListener('click', () => {
            const codeContent = copyButton.closest('.snippet-clipboard-content').innerText;
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = codeContent;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            document.execCommand('copy');
            document.body.removeChild(tempTextArea);

            const copyIcon = copyButton.querySelector('.octicon-copy');
            const checkIcon = copyButton.querySelector('.octicon-check');
            const copyFeedback = copyButton.nextElementSibling;

            if (currentFeedback && currentFeedback !== copyFeedback) {currentFeedback.style.display = 'none';}
            currentFeedback = copyFeedback;

            copyIcon.classList.add('d-none');
            checkIcon.classList.remove('d-none');
            copyFeedback.style.display = 'block';
            copyButton.style.borderColor = 'var(--color-success-fg)';

            setTimeout(() => {
                copyIcon.classList.remove('d-none');
                checkIcon.classList.add('d-none');
                copyFeedback.style.display = 'none';
                copyButton.style.borderColor = '';
            }, 2000);
        });
    });
});

</script>
<script>document.addEventListener('visibilitychange',function(){const o=document.title;const i=['不来看看咱喵~？','喵喵喵~？'];if(document.visibilityState==='hidden'){document.title=i[Math.floor(Math.random()*i.length)];}else{document.title='欢迎回来喵~';setTimeout(function(){document.title=o;},1000);}});</script><script src='https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js'></script><script>document.addEventListener('visibilitychange',function(){if(!window.originalTitle){window.originalTitle=document.title;}const h=['不来看看咱喵~？','喵喵喵~？'];if(document.visibilityState==='hidden'){document.title=h[Math.floor(Math.random()*h.length)];}else{document.title='欢迎回来喵~';setTimeout(()=>{document.title=window.originalTitle;},1000);}});</script>

</html>
