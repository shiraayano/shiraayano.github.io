<!DOCTYPE html>
<html data-color-mode="light" data-dark-theme="dark_colorblind" data-light-theme="light" lang="zh-CN">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />
    
    <link rel="icon" href="https://avatars.githubusercontent.com/u/69860501?v=4"><script>
        let theme = localStorage.getItem("meek_theme") || "light";
        document.documentElement.setAttribute("data-color-mode", theme);
    </script>
<meta name="description" content="### MyBatis简介
![](https://cdn.nlark.com/yuque/0/2024/png/49455411/1733233179374-fc012a6d-44f5-4310-b6a6-480a8a6c318f.png)

mybatis就是一层封装

![](https://cdn.nlark.com/yuque/0/2024/png/49455411/1733234269306-4ff84d50-58a0-4548-a832-7b4aaf6bbbdf.png)

作用：简化数据库操作的

运行效率 JDBC>MyBatis>Hibernate

这些都是对于JDBC的封装，封装的越多，效率越低

功能强大性能优异

![](https://cdn.nlark.com/yuque/0/2024/png/49455411/1733233032178-433c21bc-a7a7-4d0f-a925-d726c7f37178.png)

#### 什么是MyBatis？
MyBatis是一个优秀的持久层框架，它支持自定义SQL、存储过程以及高级映射。">
<meta property="og:title" content="Java 学习笔记 MyBatis">
<meta property="og:description" content="### MyBatis简介
![](https://cdn.nlark.com/yuque/0/2024/png/49455411/1733233179374-fc012a6d-44f5-4310-b6a6-480a8a6c318f.png)

mybatis就是一层封装

![](https://cdn.nlark.com/yuque/0/2024/png/49455411/1733234269306-4ff84d50-58a0-4548-a832-7b4aaf6bbbdf.png)

作用：简化数据库操作的

运行效率 JDBC>MyBatis>Hibernate

这些都是对于JDBC的封装，封装的越多，效率越低

功能强大性能优异

![](https://cdn.nlark.com/yuque/0/2024/png/49455411/1733233032178-433c21bc-a7a7-4d0f-a925-d726c7f37178.png)

#### 什么是MyBatis？
MyBatis是一个优秀的持久层框架，它支持自定义SQL、存储过程以及高级映射。">
<meta property="og:type" content="article">
<meta property="og:url" content="https://blog.adouzi.eu.org/post/42.html">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Meekdai/meekdai.github.io/logo64.jpg">
<title>Java 学习笔记 MyBatis</title>
<link href="//unpkg.com/@wooorm/starry-night@2.1.1/style/both.css" rel="stylesheet" />


</head>
<style>
body{box-sizing: border-box;min-width: 200px;max-width: 900px;margin: 20px auto;padding: 45px;font-size: 16px;font-family: sans-serif;line-height: 1.25;}
#header{display:flex;padding-bottom:8px;border-bottom: 1px solid var(--borderColor-muted, var(--color-border-muted));margin-bottom: 16px;}
#footer {margin-top:64px; text-align: center;font-size: small;}

</style>

<style>
.postTitle{margin: auto 0;font-size:40px;font-weight:bold;}
.title-right{display:flex;margin:auto 0 0 auto;}
.title-right .circle{padding: 14px 16px;margin-right:8px;}
#postBody{border-bottom: 1px solid var(--color-border-default);padding-bottom:36px;}
#postBody hr{height:2px;}
#cmButton{height:48px;margin-top:48px;}
#comments{margin-top:64px;}
.g-emoji{font-size:24px;}
@media (max-width: 600px) {
    body {padding: 8px;}
    .postTitle{font-size:24px;}
}
.copy-feedback {
    display: none;
    position: absolute;
    top: 10px;
    right: 50px;
    color: var(--color-fg-on-emphasis);
    background-color: var(--color-fg-muted);
    border-radius: 3px;
    padding: 5px 8px;
    font-size: 12px;
}
</style>
<style>img{max-width:100%;height:auto;display:block;margin:1em auto;border-radius:8px;box-shadow:0 4px 6px rgba(0,0,0,.1);transition:transform .2s ease,box-shadow .2s ease;}img[data-src]{opacity:0;animation:fadeIn 1s forwards;}@keyframes fadeIn{to{opacity:1;}}img:hover{transform:scale(1.05);box-shadow:0 8px 12px rgba(0,0,0,.2);}@media(max-width:600px){img{margin:.5em auto;}}</style>



<body>
    <div id="header">
<h1 class="postTitle">Java 学习笔记 MyBatis</h1>
<div class="title-right">
    <a href="https://blog.adouzi.eu.org" id="buttonHome" class="btn btn-invisible circle" title="首页">
        <svg class="octicon" width="16" height="16">
            <path id="pathHome" fill-rule="evenodd"></path>
        </svg>
    </a>
    
    <a href="https://github.com/shiraayano/shiraayano.github.io/issues/42" target="_blank" class="btn btn-invisible circle" title="Issue">
        <svg class="octicon" width="16" height="16">
            <path id="pathIssue" fill-rule="evenodd"></path>
        </svg>
    </a>
    

    <a class="btn btn-invisible circle" onclick="modeSwitch();" title="切换主题">
        <svg class="octicon" width="16" height="16" >
            <path id="themeSwitch" fill-rule="evenodd"></path>
        </svg>
    </a>

</div>
</div>
    <div id="content">
<div class="markdown-body" id="postBody"><h3>MyBatis简介</h3>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/f72f90ffad993509aa386fcdb09dd60c98c7fe6ac2540241fd2861317ded1506/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233333137393337342d66633031326136642d343466352d343331302d623661362d3438306138613663333138662e706e67"><img src="https://camo.githubusercontent.com/f72f90ffad993509aa386fcdb09dd60c98c7fe6ac2540241fd2861317ded1506/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233333137393337342d66633031326136642d343466352d343331302d623661362d3438306138613663333138662e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733233179374-fc012a6d-44f5-4310-b6a6-480a8a6c318f.png" style="max-width: 100%;"></a></p>
<p>mybatis就是一层封装</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/50681e1431b08976c0693beba2fc0d1f3e9c4640ff96f264689db4693da20b5e/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233343236393330362d34666638346435302d353861302d343534382d613833322d3762346161663662626264662e706e67"><img src="https://camo.githubusercontent.com/50681e1431b08976c0693beba2fc0d1f3e9c4640ff96f264689db4693da20b5e/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233343236393330362d34666638346435302d353861302d343534382d613833322d3762346161663662626264662e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733234269306-4ff84d50-58a0-4548-a832-7b4aaf6bbbdf.png" style="max-width: 100%;"></a></p>
<p>作用：简化数据库操作的</p>
<p>运行效率 JDBC&gt;MyBatis&gt;Hibernate</p>
<p>这些都是对于JDBC的封装，封装的越多，效率越低</p>
<p>功能强大性能优异</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/5cd983332339c613e1ab21fb63910a4cd321a90c259f7b97e309b17f2afc225f/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233333033323137382d34333363323162632d613761372d346430662d613932352d6437323663376633373137382e706e67"><img src="https://camo.githubusercontent.com/5cd983332339c613e1ab21fb63910a4cd321a90c259f7b97e309b17f2afc225f/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233333033323137382d34333363323162632d613761372d346430662d613932352d6437323663376633373137382e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733233032178-433c21bc-a7a7-4d0f-a925-d726c7f37178.png" style="max-width: 100%;"></a></p>
<h4>什么是MyBatis？</h4>
<p>MyBatis是一个优秀的持久层框架，它支持自定义SQL、存储过程以及高级映射。MyBatis消除了几乎所有的JDBC代码以及设置参数和获取结果集的工作。MyBatis可以通过简单的XML或注解来配置和映射原始类型、接口和Java POJO（Plain Old Java Objects，普通老式Java对象）为数据库中的记录.</p>
<h4>MyBatis的特点</h4>
<ol>
<li><strong>简化数据库访问</strong>：MyBatis通过XML或注解配置，简化了数据库访问操作，减少了代码量。</li>
<li><strong>灵活的SQL</strong>：支持自定义SQL语句，开发者可以完全控制SQL的执行。</li>
<li><strong>高级映射</strong>：支持复杂的映射关系，包括一对一、一对多、多对多等。</li>
<li><strong>动态SQL</strong>：支持动态SQL语句，可以根据条件生成不同的SQL。</li>
<li><strong>缓存机制</strong>：内置一级缓存和二级缓存，提高了查询性能。</li>
</ol>
<h4>MyBatis的基本使用</h4>
<ol>
<li><strong>引入依赖</strong><br>
在项目的<code class="notranslate">pom.xml</code>文件中添加MyBatis相关的依赖：</li>
</ol>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">dependency</span>&gt;
    &lt;<span class="pl-ent">groupId</span>&gt;org.mybatis&lt;/<span class="pl-ent">groupId</span>&gt;
    &lt;<span class="pl-ent">artifactId</span>&gt;mybatis&lt;/<span class="pl-ent">artifactId</span>&gt;
    &lt;<span class="pl-ent">version</span>&gt;3.5.17&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre></div>
<ol>
<li><strong>配置SqlSessionFactory</strong><br>
使用XML配置文件来配置SqlSessionFactory：</li>
</ol>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;?<span class="pl-ent">xml</span><span class="pl-e"> version</span>=<span class="pl-s"><span class="pl-pds">"</span>1.0<span class="pl-pds">"</span></span><span class="pl-e"> encoding</span>=<span class="pl-s"><span class="pl-pds">"</span>UTF-8<span class="pl-pds">"</span></span> ?&gt;
&lt;!<span class="pl-ent">DOCTYPE</span> <span class="pl-e">configuration</span> PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "https://mybatis.org/dtd/mybatis-3-config.dtd"&gt;
&lt;<span class="pl-ent">configuration</span>&gt;
    &lt;<span class="pl-ent">environments</span> <span class="pl-e">default</span>=<span class="pl-s"><span class="pl-pds">"</span>development<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">environment</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>development<span class="pl-pds">"</span></span>&gt;
            &lt;<span class="pl-ent">transactionManager</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>JDBC<span class="pl-pds">"</span></span>/&gt;
            &lt;<span class="pl-ent">dataSource</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>POOLED<span class="pl-pds">"</span></span>&gt;
                &lt;<span class="pl-ent">property</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>driver<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>${driver}<span class="pl-pds">"</span></span>/&gt;
                &lt;<span class="pl-ent">property</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>url<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>${url}<span class="pl-pds">"</span></span>/&gt;
                &lt;<span class="pl-ent">property</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>username<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>${username}<span class="pl-pds">"</span></span>/&gt;
                &lt;<span class="pl-ent">property</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>password<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>${password}<span class="pl-pds">"</span></span>/&gt;
            &lt;/<span class="pl-ent">dataSource</span>&gt;
        &lt;/<span class="pl-ent">environment</span>&gt;
    &lt;/<span class="pl-ent">environments</span>&gt;
    &lt;<span class="pl-ent">mappers</span>&gt;
        &lt;<span class="pl-ent">mapper</span> <span class="pl-e">resource</span>=<span class="pl-s"><span class="pl-pds">"</span>org/mybatis/example/BlogMapper.xml<span class="pl-pds">"</span></span>/&gt;
    &lt;/<span class="pl-ent">mappers</span>&gt;
&lt;/<span class="pl-ent">configuration</span>&gt;</pre></div>
<ol>
<li><strong>定义Mapper接口</strong><br>
创建一个Mapper接口，并在接口方法上使用注解或XML配置SQL语句：</li>
</ol>
<div class="highlight highlight-source-java"><pre class="notranslate"><span class="pl-k">public</span> <span class="pl-k">interface</span> <span class="pl-smi">BlogMapper</span> {
    <span class="pl-c1">@</span><span class="pl-c1">Select</span>(<span class="pl-s">"SELECT * FROM blog WHERE id = #{id}"</span>)
    <span class="pl-smi">Blog</span> <span class="pl-en">selectBlog</span>(<span class="pl-smi">int</span> <span class="pl-s1">id</span>);
}</pre></div>
<ol>
<li><strong>使用MyBatis</strong><br>
在代码中使用SqlSessionFactory获取SqlSession，并调用Mapper接口的方法：</li>
</ol>
<div class="highlight highlight-source-java"><pre class="notranslate"><span class="pl-k">try</span> (<span class="pl-smi">SqlSession</span> <span class="pl-s1">session</span> = <span class="pl-s1">sqlSessionFactory</span>.<span class="pl-en">openSession</span>()) {
    <span class="pl-smi">BlogMapper</span> <span class="pl-s1">mapper</span> = <span class="pl-s1">session</span>.<span class="pl-en">getMapper</span>(<span class="pl-smi">BlogMapper</span>.<span class="pl-k">class</span>);
    <span class="pl-smi">Blog</span> <span class="pl-s1">blog</span> = <span class="pl-s1">mapper</span>.<span class="pl-en">selectBlog</span>(<span class="pl-c1">101</span>);
}</pre></div>
<h4>MyBatis的应用场景</h4>
<ol>
<li><strong>企业级应用开发</strong>：MyBatis适用于各种规模的企业级应用开发，特别是需要灵活控制SQL的场景。</li>
<li><strong>复杂查询</strong>：MyBatis支持复杂的查询和映射关系，适用于需要复杂查询的应用。</li>
<li><strong>高性能需求</strong>：MyBatis内置缓存机制，适用于对性能有较高要求的应用。</li>
<li>轻量级</li>
</ol>
<h4>示例</h4>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/ca8741c344eae9d75cc1cf728aabd5c84e4d533ee7a4bbf76d08354b5e5e7d4d/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233323339343635372d63393531633632312d633435632d346663372d626435332d3135633563303464653434392e706e67"><img src="https://camo.githubusercontent.com/ca8741c344eae9d75cc1cf728aabd5c84e4d533ee7a4bbf76d08354b5e5e7d4d/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233323339343635372d63393531633632312d633435632d346663372d626435332d3135633563303464653434392e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733232394657-c951c621-c45c-4fc7-bd53-15c5c04de449.png" style="max-width: 100%;"></a></p>
<h5>新建一个父工程</h5>
<ul>
<li>导入依赖
<ul>
<li>需要导入mybatis</li>
<li>mysql驱动</li>
<li>junit5测试</li>
</ul>
</li>
</ul>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/440fc6cebc9287dc5374c2219dac4dfd95d8018b40f39fd31b15595f6f8e3369/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233323133383435332d37366565303861382d653839372d343761342d626137362d6535653265623930643732652e706e67"><img src="https://camo.githubusercontent.com/440fc6cebc9287dc5374c2219dac4dfd95d8018b40f39fd31b15595f6f8e3369/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233323133383435332d37366565303861382d653839372d343761342d626137362d6535653265623930643732652e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733232138453-76ee08a8-e897-47a4-ba76-e5e2eb90d72e.png" style="max-width: 100%;"></a></p>
<h5>新建moudle</h5>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/099efe6dfd0df6da1c68518b6cdec33fbf9fbab338ceca01176f6d957e67fee9/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233323235323539362d36646336353465342d323438342d346636662d383863352d6565626234616266323534322e706e67"><img src="https://camo.githubusercontent.com/099efe6dfd0df6da1c68518b6cdec33fbf9fbab338ceca01176f6d957e67fee9/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233323235323539362d36646336353465342d323438342d346636662d383863352d6565626234616266323534322e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733232252596-6dc654e4-2484-4f6f-88c5-eebb4abf2542.png" style="max-width: 100%;"></a></p>
<h5>--</h5>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/3ada4a94963e8f1b052f9894e58b68ae32248da10f022a595817880bd627ac8a/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233323434313739392d39333765313664352d396533612d343330612d613139632d3639326563663565323631342e706e67"><img src="https://camo.githubusercontent.com/3ada4a94963e8f1b052f9894e58b68ae32248da10f022a595817880bd627ac8a/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233323434313739392d39333765313664352d396533612d343330612d613139632d3639326563663565323631342e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733232441799-937e16d5-9e3a-430a-a19c-692ecf5e2614.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/b43459a39fdff723738d8c05f15ed674810ce3b49e19fa932f0b63583095d343/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233323530333139342d38356334306263302d646362352d343631322d613665302d6236343838306165386530352e706e67"><img src="https://camo.githubusercontent.com/b43459a39fdff723738d8c05f15ed674810ce3b49e19fa932f0b63583095d343/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233323530333139342d38356334306263302d646362352d343631322d613665302d6236343838306165386530352e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733232503194-85c40bc0-dcb5-4612-a6e0-b64880ae8e05.png" style="max-width: 100%;"></a></p>
<p>注意：mapper接口不能重载，因为它是根据方法名识别的</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/b6d02c39160daad248ea67b3866667125bc06f700b8cbd528da5c549180d4dbe/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233323732363035322d61303965303131662d383262322d346363312d623831342d6266636430643137363864342e706e67"><img src="https://camo.githubusercontent.com/b6d02c39160daad248ea67b3866667125bc06f700b8cbd528da5c549180d4dbe/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233323732363035322d61303965303131662d383262322d346363312d623831342d6266636430643137363864342e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733232726052-a09e011f-82b2-4cc1-b814-bfcd0d1768d4.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/89ae111ef41342ab540133d9c53641d6fa236ed9c3f1fae39f2aac2b4baca37f/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233323932383138352d64353663623231642d396466652d343732352d623262312d3831393736353331336439302e706e67"><img src="https://camo.githubusercontent.com/89ae111ef41342ab540133d9c53641d6fa236ed9c3f1fae39f2aac2b4baca37f/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233323932383138352d64353663623231642d396466652d343732352d623262312d3831393736353331336439302e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733232928185-d56cb21d-9dfe-4725-b2b1-819765313d90.png" style="max-width: 100%;"></a></p>
<h4>ibatis方式</h4>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/060e0a011e40e5fb95cc32e29a1a05829dcb55e1397778ff0c65b7685f28d211/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233333836353938302d62363665633439302d376531652d343664612d383531352d6463643361343933616332622e706e67"><img src="https://camo.githubusercontent.com/060e0a011e40e5fb95cc32e29a1a05829dcb55e1397778ff0c65b7685f28d211/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233333836353938302d62363665633439302d376531652d343664612d383531352d6463643361343933616332622e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733233865980-b66ec490-7e1e-46da-8515-dcd3a493ac2b.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/70e6825ba0c0d1dbdbbdc68368c2e1ef8688fe1455bc6a24eea7e48c5eac290c/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233333239333734342d66653232363832382d393637632d346261642d396431322d3031646363326239366633622e706e67"><img src="https://camo.githubusercontent.com/70e6825ba0c0d1dbdbbdc68368c2e1ef8688fe1455bc6a24eea7e48c5eac290c/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233333239333734342d66653232363832382d393637632d346261642d396431322d3031646363326239366633622e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733233293744-fe226828-967c-4bad-9d12-01dcc2b96f3b.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/d5daa1e00dd0ad2b6d65642aa1c29aeaa45042e90dd57aabec9e974933900362/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233333630303330322d33376232323432322d333365332d343031612d393730322d6232336338303431393539662e706e67"><img src="https://camo.githubusercontent.com/d5daa1e00dd0ad2b6d65642aa1c29aeaa45042e90dd57aabec9e974933900362/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233333630303330322d33376232323432322d333365332d343031612d393730322d6232336338303431393539662e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733233600302-37b22422-33e3-401a-9702-b23c8041959f.png" style="max-width: 100%;"></a></p>
<p>我们可以声明接口来保证我们写的正确</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/771d4b303cf6fadeb3719cb51523a95bfd95c5fd05a17e4d8cafa83abe3cbd5a/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233333936323732342d36616661326332322d663432372d343431382d613334302d3930636364623831343737312e706e67"><img src="https://camo.githubusercontent.com/771d4b303cf6fadeb3719cb51523a95bfd95c5fd05a17e4d8cafa83abe3cbd5a/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333233333936323732342d36616661326332322d663432372d343431382d613334302d3930636364623831343737312e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733233962724-6afa2c22-f427-4418-a340-90ccdb814771.png" style="max-width: 100%;"></a></p>
<h3>MyBatis中的#{}和${}的区别</h3>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/9bfa2bbae8be26ee48bf1b4658617e0fefc75af5c1fb2b1865798345819933b7/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332303831373038322d30353337653532352d626266372d343337332d383130332d3631383463623034343530352e706e67"><img src="https://camo.githubusercontent.com/9bfa2bbae8be26ee48bf1b4658617e0fefc75af5c1fb2b1865798345819933b7/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332303831373038322d30353337653532352d626266372d343337332d383130332d3631383463623034343530352e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733320817082-0537e525-bbf7-4373-8103-6184cb044505.png" style="max-width: 100%;"></a></p>
<p>在MyBatis中，<code class="notranslate">#{} </code>和<code class="notranslate">${}</code>是用于在SQL语句中插入参数的两种方式，它们有不同的用途和行为。</p>
<h4>1. <code class="notranslate">#{} </code>（占位符 + 赋值   id=? ?=赋值） 推荐使用</h4>
<ul>
<li><strong>用途</strong>：用于安全地插入参数，防止SQL注入。</li>
<li><strong>行为</strong>：MyBatis会将<code class="notranslate">#{} </code>中的参数替换为一个占位符（如<code class="notranslate">?</code>），并使用PreparedStatement来设置参数值。</li>
<li>只能替代值的位置，不能替代容器名（标签，列名，sql 关键字）</li>
<li><strong>示例</strong>：</li>
</ul>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">select</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>selectUser<span class="pl-pds">"</span></span> <span class="pl-e">parameterType</span>=<span class="pl-s"><span class="pl-pds">"</span>int<span class="pl-pds">"</span></span> <span class="pl-e">resultType</span>=<span class="pl-s"><span class="pl-pds">"</span>User<span class="pl-pds">"</span></span>&gt;
    SELECT * FROM users WHERE id = #{id}
&lt;/<span class="pl-ent">select</span>&gt;
</pre></div>
<p>在这个示例中，<code class="notranslate">#{id}</code>会被替换为一个占位符<code class="notranslate">?</code>，并在执行SQL时将参数值设置为<code class="notranslate">id</code>的值。</p>
<h4>2. <code class="notranslate">${}</code>（字符串拼接）</h4>
<ul>
<li><strong>用途</strong>：用于直接插入参数值，不进行预编译，适用于动态生成SQL语句的场景。</li>
<li><strong>行为</strong>：MyBatis会将<code class="notranslate">${}</code>中的参数直接替换为参数值，不进行任何转义或预编译。</li>
<li><strong>示例</strong>：</li>
</ul>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">select</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>selectUser<span class="pl-pds">"</span></span> <span class="pl-e">parameterType</span>=<span class="pl-s"><span class="pl-pds">"</span>String<span class="pl-pds">"</span></span> <span class="pl-e">resultType</span>=<span class="pl-s"><span class="pl-pds">"</span>User<span class="pl-pds">"</span></span>&gt;
    SELECT * FROM users WHERE name = '${name}'
&lt;/<span class="pl-ent">select</span>&gt;
</pre></div>
<p>在这个示例中，<code class="notranslate">${name}</code>会被直接替换为参数<code class="notranslate">name</code>的值。如果<code class="notranslate">name</code>的值是<code class="notranslate">John</code>，则生成的SQL语句为<code class="notranslate">SELECT * FROM users WHERE name = 'John'</code>。</p>
<h4>区别总结</h4>
<ol>
<li><strong>安全性</strong>：<code class="notranslate">#{} </code>使用PreparedStatement，防止SQL注入；<code class="notranslate">${}</code>直接插入参数值，存在SQL注入风险。</li>
<li><strong>性能</strong>：<code class="notranslate">#{} </code>使用预编译SQL，性能较好；<code class="notranslate">${}</code>每次执行都会重新解析SQL，性能较差。</li>
<li><strong>用途</strong>：<code class="notranslate">#{} </code>适用于传递参数值；<code class="notranslate">${}</code>适用于动态生成SQL语句。</li>
</ol>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/662f96c22e5631f95c7ee2b9bced7e999ea317d9819e50ddaa471974ee2a2bd2/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332313234353034392d66363837363133392d646633632d346630632d396464612d3231383831626239393162362e706e67"><img src="https://camo.githubusercontent.com/662f96c22e5631f95c7ee2b9bced7e999ea317d9819e50ddaa471974ee2a2bd2/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332313234353034392d66363837363133392d646633632d346630632d396464612d3231383831626239393162362e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733321245049-f6876139-df3c-4f0c-9dda-21881bb991b6.png" style="max-width: 100%;"></a></p>
<h4>简单类型传入</h4>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/04808c8b25177a8971e7731e1c785e878bc3eb229ba2d8c9c2c8bfbe85e59d87/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332313335333638322d65633135323736622d656662642d346464312d613636372d3836343462653765303539372e706e67"><img src="https://camo.githubusercontent.com/04808c8b25177a8971e7731e1c785e878bc3eb229ba2d8c9c2c8bfbe85e59d87/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332313335333638322d65633135323736622d656662642d346464312d613636372d3836343462653765303539372e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733321353682-ec15276b-efbd-4dd1-a667-8644be7e0597.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/1b04caa3b46538e8b9d96b80de15a1fa151215adc7ebaa460cfef93c7e94e518/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332313432303132332d34656364633739302d386236622d346231642d393964302d6337376361336134376164662e706e67"><img src="https://camo.githubusercontent.com/1b04caa3b46538e8b9d96b80de15a1fa151215adc7ebaa460cfef93c7e94e518/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332313432303132332d34656364633739302d386236622d346231642d393964302d6337376361336134376164662e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733321420123-4ecdc790-8b6b-4b1d-99d0-c77ca3a47adf.png" style="max-width: 100%;"></a></p>
<p>key 值随便写，一般情况推荐使用参数名</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/fe5aff6f47b291c1fadb734e3d78884071530fea6ead6000d6d7444f7aaedd4e/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332313534343330352d32336631656633322d356230332d346438392d623665622d6634383732363733633233622e706e67"><img src="https://camo.githubusercontent.com/fe5aff6f47b291c1fadb734e3d78884071530fea6ead6000d6d7444f7aaedd4e/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332313534343330352d32336631656633322d356230332d346438392d623665622d6634383732363733633233622e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733321544305-23f1ef32-5b03-4d89-b6eb-f4872673c23b.png" style="max-width: 100%;"></a></p>
<h4>单个实例对象传入</h4>
<p>key=属性名即可</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/f9f3c6098960f8698004181e322f72683773c9c609c5eb67cdb17d8c18cd435d/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332313538333736352d66646134353539362d383962382d343337322d386462352d6337333465666263373261632e706e67"><img src="https://camo.githubusercontent.com/f9f3c6098960f8698004181e322f72683773c9c609c5eb67cdb17d8c18cd435d/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332313538333736352d66646134353539362d383962382d343337322d386462352d6337333465666263373261632e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733321583765-fda45596-89b8-4372-8db5-c734efbc72ac.png" style="max-width: 100%;"></a></p>
<p>写传入对象的属性</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/5bd8b841548aeba4bbca63c7394071a37e1273cfa51bf50ac213560e64371fdd/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332313635373831352d34376534383632662d313733342d343662662d623438322d3934356230653165646432642e706e67"><img src="https://camo.githubusercontent.com/5bd8b841548aeba4bbca63c7394071a37e1273cfa51bf50ac213560e64371fdd/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332313635373831352d34376534383632662d313733342d343662662d623438322d3934356230653165646432642e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733321657815-47e4862f-1734-46bf-b482-945b0e1edd2d.png" style="max-width: 100%;"></a></p>
<h4>传入多个简单类型数据如何取值</h4>
<p>推荐使用注解</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/8c1d3e86e462cf6ec4e6a9ff1d9c20fa50f334ce9cc10fd5ff56544fbb453a4a/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332323431323639352d38393839313730372d306461642d343531332d396235392d3161386331326665376664322e706e67"><img src="https://camo.githubusercontent.com/8c1d3e86e462cf6ec4e6a9ff1d9c20fa50f334ce9cc10fd5ff56544fbb453a4a/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332323431323639352d38393839313730372d306461642d343531332d396235392d3161386331326665376664322e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733322412695-89891707-0dad-4513-9b59-1a8c12fe7fd2.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/68d5ba150592e23c57f5e36623fac91126ba98ddebf008bfb8cebe1145c7c587/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332323432303237362d65653536323730652d613437662d343062652d386533322d6561303434656561663634622e706e67"><img src="https://camo.githubusercontent.com/68d5ba150592e23c57f5e36623fac91126ba98ddebf008bfb8cebe1145c7c587/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332323432303237362d65653536323730652d613437662d343062652d386533322d6561303434656561663634622e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733322420276-ee56270e-a47f-40be-8e32-ea044eeaf64b.png" style="max-width: 100%;"></a></p>
<h4>传入 map</h4>
<p>key=map 的 key 即可</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/f24175f188a1154e9db44ff05e75d8065ca474da1491fc0968cfabd8feaf9dd8/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332323537363234302d63666265316463352d616161352d343532392d613136622d6464363165396231633231662e706e67"><img src="https://camo.githubusercontent.com/f24175f188a1154e9db44ff05e75d8065ca474da1491fc0968cfabd8feaf9dd8/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332323537363234302d63666265316463352d616161352d343532392d613136622d6464363165396231633231662e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733322576240-cfbe1dc5-aaa5-4529-a16b-dd61e9b1c21f.png" style="max-width: 100%;"></a></p>
<p>可以去官网查看文档 mybatis.org</p>
<h4>事务管理器</h4>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/46868c334a7f0feefb18b0c95748038a78ebd6f5b21617543d27499010684846/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332303038313135342d31316566366233642d336232612d343734302d616265652d3938383561623062326139322e706e67"><img src="https://camo.githubusercontent.com/46868c334a7f0feefb18b0c95748038a78ebd6f5b21617543d27499010684846/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332303038313135342d31316566366233642d336232612d343734302d616265652d3938383561623062326139322e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733320081154-11ef6b3d-3b2a-4740-abee-9885ab0b2a92.png" style="max-width: 100%;"></a></p>
<p>使用 JDBC 就会自动开启管理事务，有事务相关的管理</p>
<p>使用 MANAGED 这个配置基本啥也不干</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/66ce8c6b5fa6b8414528309c3fc7bce93d156e15181978a2c343096a09ee3763/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332303137393733322d66623464326263652d623864612d343433382d383365322d3934633731393439636639642e706e67"><img src="https://camo.githubusercontent.com/66ce8c6b5fa6b8414528309c3fc7bce93d156e15181978a2c343096a09ee3763/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332303137393733322d66623464326263652d623864612d343433382d383365322d3934633731393439636639642e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733320179732-fb4d2bce-b8da-4438-83e2-94c71949cf9d.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/06c794a7d6a057c5e280a3a118990352bf33a94840e70c69ebaea31bf15e4f50/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332303234373531342d34653034303438312d353137652d343137312d626161342d3038353839306633346537642e706e67"><img src="https://camo.githubusercontent.com/06c794a7d6a057c5e280a3a118990352bf33a94840e70c69ebaea31bf15e4f50/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332303234373531342d34653034303438312d353137652d343137312d626161342d3038353839306633346537642e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733320247514-4e040481-517e-4171-baa4-085890f34e7d.png" style="max-width: 100%;"></a></p>
<p>一般我们不使用 mybatis 的连接池，我们使用第三方的</p>
<p>性能好</p>
<p>开启日志输出</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/fa84f2f382aaed1287e157a0a70f4c3510aaf1eb6a0519134e2a1138dd961d4b/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332303433313234302d37636233636633662d376132662d343237642d613761352d3235616235336438346537322e706e67"><img src="https://camo.githubusercontent.com/fa84f2f382aaed1287e157a0a70f4c3510aaf1eb6a0519134e2a1138dd961d4b/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332303433313234302d37636233636633662d376132662d343237642d613761352d3235616235336438346537322e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733320431240-7cb3cf3f-7a2f-427d-a7a5-25ab53d84e72.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/c5e44294ac98027acfd9cf3b86f6028d12d7955e1e5a0802740a6bb75b88465a/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332303435303439352d62663939346234382d663463302d346266622d623135332d6537333533613631653236642e706e67"><img src="https://camo.githubusercontent.com/c5e44294ac98027acfd9cf3b86f6028d12d7955e1e5a0802740a6bb75b88465a/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332303435303439352d62663939346234382d663463302d346266622d623135332d6537333533613631653236642e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733320450495-bf994b48-f4c0-4bfb-b153-e7353a61e26d.png" style="max-width: 100%;"></a></p>
<h3>单个简单类型和定义别名</h3>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/7e388e852271bd6e59b04ad53548be67cb94c4c435022fbb8fa1e87a2f61e00d/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332323834313736372d64633337393636622d376336632d343364352d616263332d3931363638343630346163302e706e67"><img src="https://camo.githubusercontent.com/7e388e852271bd6e59b04ad53548be67cb94c4c435022fbb8fa1e87a2f61e00d/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332323834313736372d64633337393636622d376336632d343364352d616263332d3931363638343630346163302e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733322841767-dc37966b-7c6c-43d5-abc3-916684604ac0.png" style="max-width: 100%;"></a></p>
<p>可以写全名或者简写</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/f1086c9d959ca969b50e7c4c5295f1a9014a1d93d762389afc50b16fc8b36512/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332323937373338372d39366635616464622d613630332d343263302d623061662d3532316166313163323530612e706e67"><img src="https://camo.githubusercontent.com/f1086c9d959ca969b50e7c4c5295f1a9014a1d93d762389afc50b16fc8b36512/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332323937373338372d39366635616464622d613630332d343263302d623061662d3532316166313163323530612e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733322977387-96f5addb-a603-42c0-b0af-521af11c250a.png" style="max-width: 100%;"></a></p>
<blockquote>
<p>mybatis 给我们提供了 72 种类别名，如果没有我们可以自己定义或写类的全限定符号</p>
</blockquote>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/bfa434f6b26290e64cee0f6d7cea7a022ff5499f63e775d2a25dfe73580d15f3/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332333033323531302d36396434613133332d313164322d346336642d613236632d3937366232653662653463662e706e67"><img src="https://camo.githubusercontent.com/bfa434f6b26290e64cee0f6d7cea7a022ff5499f63e775d2a25dfe73580d15f3/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332333033323531302d36396434613133332d313164322d346336642d613236632d3937366232653662653463662e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733323032510-69d4a133-11d2-4c6d-a26c-976b2e6be4cf.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/5d962dac8c8f2d324faf32e1ed55c636d6e3ecc09f36ecbc3cb60915bfe01c59/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332333037363239382d32616331326263632d653363662d343838392d613036612d3739363639353134383939352e706e67"><img src="https://camo.githubusercontent.com/5d962dac8c8f2d324faf32e1ed55c636d6e3ecc09f36ecbc3cb60915bfe01c59/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332333037363239382d32616331326263632d653363662d343838392d613036612d3739363639353134383939352e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733323076298-2ac12bcc-e3cf-4889-a06a-796695148995.png" style="max-width: 100%;"></a></p>
<blockquote>
<p>写别名</p>
</blockquote>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/5b39e1112502fc8247724ee1ced1551abb670b825bc51f89e05c6c7e7a59cf97/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332333135323237332d38646366313730342d623032662d343135382d396162632d3336346664653162646162642e706e67"><img src="https://camo.githubusercontent.com/5b39e1112502fc8247724ee1ced1551abb670b825bc51f89e05c6c7e7a59cf97/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332333135323237332d38646366313730342d623032662d343135382d396162632d3336346664653162646162642e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733323152273-8dcf1704-b02f-4158-9abc-364fde1bdabd.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/b9ce70101fc748dd4da5d462d60db73cdd4cdf790fdcc5fd634072c4681257a1/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332333231393238332d35366237323130342d616163382d343865302d623963332d3032653137613232313033392e706e67"><img src="https://camo.githubusercontent.com/b9ce70101fc748dd4da5d462d60db73cdd4cdf790fdcc5fd634072c4681257a1/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332333231393238332d35366237323130342d616163382d343865302d623963332d3032653137613232313033392e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733323219283-56b72104-aac8-48e0-b9c3-02e17a221039.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/26ca977d7fc5dc5f80c97f57799c7c20be4977f4cba34618911741f97e09d1d7/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332333331343637392d34346430363738332d323433352d346131632d616164342d6262393339363732383035342e706e67"><img src="https://camo.githubusercontent.com/26ca977d7fc5dc5f80c97f57799c7c20be4977f4cba34618911741f97e09d1d7/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332333331343637392d34346430363738332d323433352d346131632d616164342d6262393339363732383035342e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733323314679-44d06783-2435-4a1c-aad4-bb9396728054.png" style="max-width: 100%;"></a></p>
<h4>单个简单类型</h4>
<p>单个简单类型指的是Java中的基本数据类型及其包装类，如<code class="notranslate">int</code>、<code class="notranslate">Integer</code>、<code class="notranslate">String</code>、<code class="notranslate">boolean</code>、<code class="notranslate">Boolean</code>等。这些类型在MyBatis中可以直接作为参数和返回值使用。</p>
<p><strong>示例</strong>：</p>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">select</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>selectUserName<span class="pl-pds">"</span></span> <span class="pl-e">parameterType</span>=<span class="pl-s"><span class="pl-pds">"</span>int<span class="pl-pds">"</span></span> <span class="pl-e">resultType</span>=<span class="pl-s"><span class="pl-pds">"</span>String<span class="pl-pds">"</span></span>&gt;
    SELECT name FROM users WHERE id = #{id}
&lt;/<span class="pl-ent">select</span>&gt;
</pre></div>
<p><code class="notranslate">parameterType</code>指定了参数类型为<code class="notranslate">int</code>，<code class="notranslate">resultType</code>指定了返回值类型为<code class="notranslate">String</code>。</p>
<h4>定义别名</h4>
<p>MyBatis允许为Java类定义别名，以简化配置文件中的类型声明。别名可以通过<code class="notranslate">&lt;typeAlias&gt;</code>标签在MyBatis配置文件中定义，也可以通过注解方式定义。</p>
<p><strong>XML配置方式</strong>：</p>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">typeAliases</span>&gt;
    &lt;<span class="pl-ent">typeAlias</span> <span class="pl-e">alias</span>=<span class="pl-s"><span class="pl-pds">"</span>User<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>com.example.model.User<span class="pl-pds">"</span></span>/&gt;
&lt;/<span class="pl-ent">typeAliases</span>&gt;
</pre></div>
<p><code class="notranslate">User</code>是<code class="notranslate">com.example.model.User</code>类的别名。在Mapper文件中，可以使用别名代替全限定类名。</p>
<p><strong>注解方式</strong>：</p>
<div class="highlight highlight-source-java"><pre class="notranslate"><span class="pl-c1">@</span><span class="pl-c1">Alias</span>(<span class="pl-s">"User"</span>)
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-smi">User</span> {
    <span class="pl-k">private</span> <span class="pl-smi">int</span> <span class="pl-s1">id</span>;
    <span class="pl-k">private</span> <span class="pl-smi">String</span> <span class="pl-s1">name</span>;
    <span class="pl-c">// getters and setters</span>
}</pre></div>
<p><code class="notranslate">@Alias("User")</code>注解为<code class="notranslate">User</code>类定义了别名。在Mapper文件中，可以使用别名代替全限定类名。</p>
<p><strong>使用别名的示例</strong>：</p>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">select</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>selectUser<span class="pl-pds">"</span></span> <span class="pl-e">parameterType</span>=<span class="pl-s"><span class="pl-pds">"</span>int<span class="pl-pds">"</span></span> <span class="pl-e">resultType</span>=<span class="pl-s"><span class="pl-pds">"</span>User<span class="pl-pds">"</span></span>&gt;
    SELECT * FROM users WHERE id = #{id}
&lt;/<span class="pl-ent">select</span>&gt;
</pre></div>
<p><code class="notranslate">resultType</code>使用了别名<code class="notranslate">User</code>，MyBatis会将查询结果映射到<code class="notranslate">User</code>类的实例中。</p>
<h4>单个实体类型输出</h4>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/7f8a1b1d983c0be478a0502705bf00185a960097a131e6c7bec4c393e13058b7/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332333531353934362d37633036303161372d643832642d343935342d613634652d6233356339306331626364352e706e67"><img src="https://camo.githubusercontent.com/7f8a1b1d983c0be478a0502705bf00185a960097a131e6c7bec4c393e13058b7/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332333531353934362d37633036303161372d643832642d343935342d613634652d6233356339306331626364352e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733323515946-7c0601a7-d82d-4954-a64e-b35c90c1bcd5.png" style="max-width: 100%;"></a></p>
<p>开启驼峰式自动映射</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/342d072ee2871473ee4b66351a690c32da64a05eda383f1f24624b65c1609dc1/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332333437363837382d39353736383161372d306439332d346239352d623064392d6636623930396530316463392e706e67"><img src="https://camo.githubusercontent.com/342d072ee2871473ee4b66351a690c32da64a05eda383f1f24624b65c1609dc1/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332333437363837382d39353736383161372d306439332d346239352d623064392d6636623930396530316463392e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733323476878-957681a7-0d93-4b95-b0d9-f6b909e01dc9.png" style="max-width: 100%;"></a></p>
<h4>返回 map</h4>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/315f07216bf505a3682217c9273a8349715a466f62a8a0b7706c6db2a63fb7cd/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332333534343530332d38613263393337622d343364312d343333352d383165332d6331636463363061653335302e706e67"><img src="https://camo.githubusercontent.com/315f07216bf505a3682217c9273a8349715a466f62a8a0b7706c6db2a63fb7cd/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332333534343530332d38613263393337622d343364312d343333352d383165332d6331636463363061653335302e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733323544503-8a2c937b-43d1-4335-81e3-c1cdc60ae350.png" style="max-width: 100%;"></a></p>
<p>列名 -&gt; key</p>
<p>map</p>
<p>结果 -&gt; 值</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/8364a6c2bd52530c79e206eaf13bee46ff751987826d9c9f2e7603817369a2fb/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332333733323932372d33653063656530622d643131612d343961622d386561382d3033373634633764393962662e706e67"><img src="https://camo.githubusercontent.com/8364a6c2bd52530c79e206eaf13bee46ff751987826d9c9f2e7603817369a2fb/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332333733323932372d33653063656530622d643131612d343961622d386561382d3033373634633764393962662e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733323732927-3e0cee0b-d11a-49ab-8ea8-03764c7d99bf.png" style="max-width: 100%;"></a></p>
<h4>返回集合类型</h4>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/01ab311f5d494b7343b98cbe22cd7999db4f72f11c2d7213fe9e972ea7079829/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332333639333734312d30646131323365662d653036352d346330652d613331342d6166336537353439396438362e706e67"><img src="https://camo.githubusercontent.com/01ab311f5d494b7343b98cbe22cd7999db4f72f11c2d7213fe9e972ea7079829/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332333639333734312d30646131323365662d653036352d346330652d613331342d6166336537353439396438362e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733323693741-0da123ef-e065-4c0e-a314-af3e75499d86.png" style="max-width: 100%;"></a></p>
<p>切记：返回值是集合 resultType 不需要指定集合类型，只需要指定泛型即可</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/990481f8f3705817398deb67bf571e3e404dd1847365c70e3641aa7a0d6e9e51/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332333833313930302d39626663313434312d393934652d343363372d623966352d6534613134363466346235342e706e67"><img src="https://camo.githubusercontent.com/990481f8f3705817398deb67bf571e3e404dd1847365c70e3641aa7a0d6e9e51/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332333833313930302d39626663313434312d393934652d343363372d623966352d6534613134363466346235342e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733323831900-9bfc1441-994e-43c7-b9f5-e4a1464f4b54.png" style="max-width: 100%;"></a></p>
<p>底层是使用集合去查的，所以我们只需要指定泛型</p>
<h4>返回主键值</h4>
<h5>自增长主键</h5>
<p>主键回显 获取插入数据的主键</p>
<p>1.自增长逐渐回显 mysql out_increment</p>
<p>int inserEmp(Employee employee);</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/79005d1b035b0e4dcacd810b9480dfea44df5a1ae4fec0503020fb295c754d35/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332363738303835302d66333466623163352d333063312d346338322d626237362d6262633532316231393736362e706e67"><img src="https://camo.githubusercontent.com/79005d1b035b0e4dcacd810b9480dfea44df5a1ae4fec0503020fb295c754d35/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332363738303835302d66333466623163352d333063312d346338322d626237362d6262633532316231393736362e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733326780850-f34fb1c5-30c1-4c82-bb76-bbc521b19766.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/1f9cc859e2d782239a7e6caa909e3e416a8a90f80692113a3381df31a7fedfc2/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332373533303130332d62303264646131362d636563632d346435622d383838312d6335313433396133363731652e706e67"><img src="https://camo.githubusercontent.com/1f9cc859e2d782239a7e6caa909e3e416a8a90f80692113a3381df31a7fedfc2/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332373533303130332d62303264646131362d636563632d346435622d383838312d6335313433396133363731652e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733327530103-b02dda16-cecc-4d5b-8881-c51439a3671e.png" style="max-width: 100%;"></a></p>
<h5>非自增长主键维护</h5>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/c52097f9d87f489fc4d0ac289ba36ceface023156b28e7b03605529497725290/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332373636343137342d39636537616266622d633836612d343932332d383131392d3630373163646563346264612e706e67"><img src="https://camo.githubusercontent.com/c52097f9d87f489fc4d0ac289ba36ceface023156b28e7b03605529497725290/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332373636343137342d39636537616266622d633836612d343932332d383131392d3630373163646563346264612e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733327664174-9ce7abfb-c86a-4923-8119-6071cdec4bda.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/29b4c269cbc624f26b68d8cc8290474d0e0473d2cc702bdbd892fbeac63e020f/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332373737363937392d37353233373733302d653564352d346661622d623132362d3933343766356462393363392e706e67"><img src="https://camo.githubusercontent.com/29b4c269cbc624f26b68d8cc8290474d0e0473d2cc702bdbd892fbeac63e020f/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332373737363937392d37353233373733302d653564352d346661622d623132362d3933343766356462393363392e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733327776979-75237730-e5d5-4fab-b126-9347f5db93c9.png" style="max-width: 100%;"></a></p>
<blockquote>
<p>自己维护主键</p>
</blockquote>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/11f0f5fbd0d2ad9cfcc0163f54e2aacb8c349e4d0b14baf64181eec7af8c1d6a/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332373936343335352d64393635376338332d396631662d343531662d613264612d3835633036343163343762632e706e67"><img src="https://camo.githubusercontent.com/11f0f5fbd0d2ad9cfcc0163f54e2aacb8c349e4d0b14baf64181eec7af8c1d6a/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332373936343335352d64393635376338332d396631662d343531662d613264612d3835633036343163343762632e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733327964355-d9657c83-9f1f-451f-a2da-85c0641c47bc.png" style="max-width: 100%;"></a></p>
<blockquote>
<p>非自增长的主键交给mybatis维护</p>
</blockquote>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/8fb7a86d1a4d174e2e547eb8e3245707bc6889df0a634cbbd9e16944372313d6/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332383138393932352d62393361653662642d663834312d346263322d393137322d3262613135396364623531612e706e67"><img src="https://camo.githubusercontent.com/8fb7a86d1a4d174e2e547eb8e3245707bc6889df0a634cbbd9e16944372313d6/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332383138393932352d62393361653662642d663834312d346263322d393137322d3262613135396364623531612e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733328189925-b93ae6bd-f841-4bc2-9172-2ba159cdb51a.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/a7c693532db4e5ffa6c736a87afe580ca3dcb660447687e1206790e03d70b380/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332383231383134392d62373736306661352d336134342d346466362d616566362d3033333665623838623133342e706e67"><img src="https://camo.githubusercontent.com/a7c693532db4e5ffa6c736a87afe580ca3dcb660447687e1206790e03d70b380/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333332383231383134392d62373736306661352d336134342d346466362d616566362d3033333665623838623133342e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733328218149-b7760fa5-3a44-4df6-aef6-0336eb88b134.png" style="max-width: 100%;"></a></p>
<h3>MyBatis自定义映射关系和ResultMap</h3>
<h4>什么是自定义映射关系？</h4>
<p>在MyBatis中，自定义映射关系是指将数据库查询结果映射到Java对象的过程。MyBatis允许开发者通过XML配置或注解的方式，自定义查询结果与Java对象属性之间的映射关系。这种映射关系可以处理复杂的查询结果，如一对一、一对多、多对多等。</p>
<h4>什么是ResultMap？</h4>
<p>ResultMap是MyBatis中用于定义自定义映射关系的核心组件。通过ResultMap，可以将查询结果中的列与Java对象的属性进行映射，从而实现复杂的映射关系。</p>
<h4>ResultMap的基本使用</h4>
<ol>
<li><strong>定义ResultMap</strong><br>
在MyBatis的XML配置文件中定义ResultMap：</li>
</ol>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">resultMap</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>userResultMap<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>com.example.model.User<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">id</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>user_id<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">result</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>user_name<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">result</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>email<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>user_email<span class="pl-pds">"</span></span>/&gt;
&lt;/<span class="pl-ent">resultMap</span>&gt;</pre></div>
<p>在这个示例中，<code class="notranslate">userResultMap</code>定义了一个ResultMap，将查询结果中的<code class="notranslate">user_id</code>、<code class="notranslate">user_name</code>和<code class="notranslate">user_email</code>列分别映射到<code class="notranslate">User</code>对象的<code class="notranslate">id</code>、<code class="notranslate">name</code>和<code class="notranslate">email</code>属性。</p>
<ol>
<li><strong>使用ResultMap</strong><br>
在Mapper文件中使用ResultMap：</li>
</ol>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">select</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>selectUser<span class="pl-pds">"</span></span> <span class="pl-e">resultMap</span>=<span class="pl-s"><span class="pl-pds">"</span>userResultMap<span class="pl-pds">"</span></span>&gt;
    SELECT user_id, user_name, user_email FROM users WHERE user_id = #{id}
&lt;/<span class="pl-ent">select</span>&gt;</pre></div>
<p>在这个示例中，<code class="notranslate">selectUser</code>查询使用了<code class="notranslate">userResultMap</code>，将查询结果映射到<code class="notranslate">User</code>对象。</p>
<h4>复杂映射关系</h4>
<ol>
<li><strong>一对一映射</strong><br>
一对一映射是指一个对象包含另一个对象的情况。例如，用户对象包含地址对象：</li>
</ol>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">resultMap</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>userResultMap<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>com.example.model.User<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">id</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>user_id<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">result</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>user_name<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">association</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>address<span class="pl-pds">"</span></span> <span class="pl-e">javaType</span>=<span class="pl-s"><span class="pl-pds">"</span>com.example.model.Address<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">id</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>address_id<span class="pl-pds">"</span></span>/&gt;
        &lt;<span class="pl-ent">result</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>street<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>address_street<span class="pl-pds">"</span></span>/&gt;
        &lt;<span class="pl-ent">result</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>city<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>address_city<span class="pl-pds">"</span></span>/&gt;
    &lt;/<span class="pl-ent">association</span>&gt;
&lt;/<span class="pl-ent">resultMap</span>&gt;</pre></div>
<ol>
<li><strong>一对多映射</strong><br>
一对多映射是指一个对象包含多个子对象的情况。例如，用户对象包含多个订单对象：</li>
</ol>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">resultMap</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>userResultMap<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>com.example.model.User<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">id</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>user_id<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">result</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>user_name<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">collection</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>orders<span class="pl-pds">"</span></span> <span class="pl-e">ofType</span>=<span class="pl-s"><span class="pl-pds">"</span>com.example.model.Order<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">id</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>order_id<span class="pl-pds">"</span></span>/&gt;
        &lt;<span class="pl-ent">result</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>amount<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>order_amount<span class="pl-pds">"</span></span>/&gt;
        &lt;<span class="pl-ent">result</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>date<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>order_date<span class="pl-pds">"</span></span>/&gt;
    &lt;/<span class="pl-ent">collection</span>&gt;
&lt;/<span class="pl-ent">resultMap</span>&gt;</pre></div>
<ol>
<li><strong>多对多映射</strong><br>
多对多映射是指一个对象包含多个子对象，每个子对象又包含多个父对象的情况。例如，学生对象包含多个课程对象，课程对象也包含多个学生对象：</li>
</ol>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">resultMap</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>studentResultMap<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>com.example.model.Student<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">id</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>student_id<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">result</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>student_name<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">collection</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>courses<span class="pl-pds">"</span></span> <span class="pl-e">ofType</span>=<span class="pl-s"><span class="pl-pds">"</span>com.example.model.Course<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">id</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>course_id<span class="pl-pds">"</span></span>/&gt;
        &lt;<span class="pl-ent">result</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>course_name<span class="pl-pds">"</span></span>/&gt;
    &lt;/<span class="pl-ent">collection</span>&gt;
&lt;/<span class="pl-ent">resultMap</span>&gt;</pre></div>
<p>通过ResultMap，MyBatis可以灵活地处理各种复杂的映射关系，满足不同的业务需求。</p>
<h3>列名和属性不一致的解决方案</h3>
<p>在MyBatis中，当数据库列名和Java属性名不一致时，可以通过以下几种方案来解决映射问题：</p>
<h4>方案1：使用别名</h4>
<p>通过在SQL查询中使用别名，将数据库列名映射到Java属性名。</p>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">select</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>selectTeacher<span class="pl-pds">"</span></span> <span class="pl-e">parameterType</span>=<span class="pl-s"><span class="pl-pds">"</span>int<span class="pl-pds">"</span></span> <span class="pl-e">resultType</span>=<span class="pl-s"><span class="pl-pds">"</span>Teacher<span class="pl-pds">"</span></span>&gt;
    SELECT t.id AS tId, t.name AS tName FROM teacher WHERE t.id = #{tId}
&lt;/<span class="pl-ent">select</span>&gt;</pre></div>
<p>在这个示例中，<code class="notranslate">t.id</code>被映射为<code class="notranslate">tId</code>，<code class="notranslate">t.name</code>被映射为<code class="notranslate">tName</code>。</p>
<h4>方案2：开启驼峰式映射</h4>
<p>通过在MyBatis配置文件中开启驼峰式映射，将下划线命名的数据库列名自动映射为驼峰命名的Java属性名。</p>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">settings</span>&gt;
    &lt;<span class="pl-ent">setting</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>mapUnderscoreToCamelCase<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>true<span class="pl-pds">"</span></span>/&gt;
&lt;/<span class="pl-ent">settings</span>&gt;</pre></div>
<p>在这个示例中，数据库列名<code class="notranslate">tid</code>会自动映射为Java属性名<code class="notranslate">tId</code>。</p>
<h4>方案3：使用ResultMap自定义映射</h4>
<p>通过ResultMap自定义映射关系，可以精确控制数据库列名和Java属性名的映射。<code class="notranslate">resultType</code>和<code class="notranslate">resultMap</code>二选一使用。</p>
<div class="highlight highlight-text-xml"><pre class="notranslate"><span class="pl-c"><span class="pl-c">&lt;!--</span> 声明ResultMap标签，自定义映射规则 <span class="pl-c">--&gt;</span></span>
&lt;<span class="pl-ent">resultMap</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>teacherResultMap<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>Teacher<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">id</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>tId<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">result</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>tName<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>/&gt;
&lt;/<span class="pl-ent">resultMap</span>&gt;

<span class="pl-c"><span class="pl-c">&lt;!--</span> 使用ResultMap <span class="pl-c">--&gt;</span></span>
&lt;<span class="pl-ent">select</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>queryById<span class="pl-pds">"</span></span> <span class="pl-e">resultMap</span>=<span class="pl-s"><span class="pl-pds">"</span>teacherResultMap<span class="pl-pds">"</span></span>&gt;
    SELECT * FROM teacher WHERE id = #{tId}
&lt;/<span class="pl-ent">select</span>&gt;</pre></div>
<p>在这个示例中，<code class="notranslate">teacherResultMap</code>定义了自定义映射规则，将数据库列<code class="notranslate">id</code>映射为Java属性<code class="notranslate">tId</code>，将数据库列<code class="notranslate">name</code>映射为Java属性<code class="notranslate">tName</code>。</p>
<h4>深层次对象结构映射</h4>
<p>对于深层次的对象结构和多表查询，可以通过ResultMap进行复杂映射。</p>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">resultMap</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>orderResultMap<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>Order<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">id</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>orderId<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>order_id<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">result</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>orderName<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>order_name<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">association</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>orderItem<span class="pl-pds">"</span></span> <span class="pl-e">javaType</span>=<span class="pl-s"><span class="pl-pds">"</span>OrderItem<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">id</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>itemId<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>item_id<span class="pl-pds">"</span></span>/&gt;
        &lt;<span class="pl-ent">result</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>orderId<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>order_id<span class="pl-pds">"</span></span>/&gt;
        &lt;<span class="pl-ent">result</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>itemName<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>item_name<span class="pl-pds">"</span></span>/&gt;
    &lt;/<span class="pl-ent">association</span>&gt;
&lt;/<span class="pl-ent">resultMap</span>&gt;

&lt;<span class="pl-ent">select</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>selectOrder<span class="pl-pds">"</span></span> <span class="pl-e">resultMap</span>=<span class="pl-s"><span class="pl-pds">"</span>orderResultMap<span class="pl-pds">"</span></span>&gt;
    SELECT o.order_id, o.order_name, i.item_id, i.order_id, i.item_name
    FROM orders o
    JOIN order_items i ON o.order_id = i.order_id
    WHERE o.order_id = #{orderId}
&lt;/<span class="pl-ent">select</span>&gt;</pre></div>
<p>在这个示例中，<code class="notranslate">orderResultMap</code>定义了复杂的映射关系，将<code class="notranslate">Order</code>对象和<code class="notranslate">OrderItem</code>对象的属性与数据库列进行映射。</p>
<p>ResultMap标签，自定义映射关系，可以多层次，也可以单层次</p>
<h4>通过注解生成对应的方法</h4>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/bef1bf88275d13542464c71a52cc2b24654ebda616f9c0fc236d045000d6f246/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333333303234353036372d66643965363166332d336235322d346664662d613733322d6233396433333735353366392e706e67"><img src="https://camo.githubusercontent.com/bef1bf88275d13542464c71a52cc2b24654ebda616f9c0fc236d045000d6f246/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333333303234353036372d66643965363166332d336235322d346664662d613733322d6233396433333735353366392e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733330245067-fd9e61f3-3b52-4fdf-a732-b39d337553f9.png" style="max-width: 100%;"></a></p>
<ul>
<li></li>
</ul>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/cf8ee2311da89d3e67c6aea32f5f562f1a3795b5092f032da6be5d67250265c5/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333333303538363738382d33306565303666622d613731632d343363302d383731342d6539343566323962306263662e706e67"><img src="https://camo.githubusercontent.com/cf8ee2311da89d3e67c6aea32f5f562f1a3795b5092f032da6be5d67250265c5/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333333303538363738382d33306565303666622d613731632d343363302d383731342d6539343566323962306263662e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733330586788-30ee06fb-a71c-43c0-8714-e945f29b0bcf.png" style="max-width: 100%;"></a></p>
<h3>MyBatis多表映射</h3>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/edc5eeab638ea47af32118965491990c81177ff8a721297a5f5cb9a3ea1f96dd/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333333303938363635362d62633933393138382d616633642d346166322d623139372d3464663638396637383262612e706e67"><img src="https://camo.githubusercontent.com/edc5eeab638ea47af32118965491990c81177ff8a721297a5f5cb9a3ea1f96dd/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333333303938363635362d62633933393138382d616633642d346166322d623139372d3464663638396637383262612e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733330986656-bc939188-af3d-4af2-b197-4df689f782ba.png" style="max-width: 100%;"></a></p>
<p>在MyBatis中，多表映射是指将多个数据库表的数据映射到Java对象中。多表映射通常用于处理复杂的查询结果，如一对一、一对多、多对多等关系。以下是一些常见的多表映射方式：</p>
<h4>一对一映射</h4>
<p>一对一映射是指一个对象包含另一个对象的情况。例如，用户对象包含地址对象。</p>
<p><strong>示例</strong>：</p>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">resultMap</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>userResultMap<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>com.example.model.User<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">id</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>user_id<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">result</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>user_name<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">association</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>address<span class="pl-pds">"</span></span> <span class="pl-e">javaType</span>=<span class="pl-s"><span class="pl-pds">"</span>com.example.model.Address<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">id</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>address_id<span class="pl-pds">"</span></span>/&gt;
        &lt;<span class="pl-ent">result</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>street<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>address_street<span class="pl-pds">"</span></span>/&gt;
        &lt;<span class="pl-ent">result</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>city<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>address_city<span class="pl-pds">"</span></span>/&gt;
    &lt;/<span class="pl-ent">association</span>&gt;
&lt;/<span class="pl-ent">resultMap</span>&gt;

&lt;<span class="pl-ent">select</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>selectUser<span class="pl-pds">"</span></span> <span class="pl-e">resultMap</span>=<span class="pl-s"><span class="pl-pds">"</span>userResultMap<span class="pl-pds">"</span></span>&gt;
    SELECT u.user_id, u.user_name, a.address_id, a.address_street, a.address_city
    FROM users u
    JOIN addresses a ON u.address_id = a.address_id
    WHERE u.user_id = #{userId}
&lt;/<span class="pl-ent">select</span>&gt;</pre></div>
<p>在这个示例中，<code class="notranslate">userResultMap</code>定义了用户和地址之间的一对一映射关系。</p>
<h4>一对多映射</h4>
<p>一对多映射是指一个对象包含多个子对象的情况。例如，用户对象包含多个订单对象。</p>
<p><strong>示例</strong>：</p>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">resultMap</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>userResultMap<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>com.example.model.User<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">id</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>user_id<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">result</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>user_name<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">collection</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>orders<span class="pl-pds">"</span></span> <span class="pl-e">ofType</span>=<span class="pl-s"><span class="pl-pds">"</span>com.example.model.Order<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">id</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>order_id<span class="pl-pds">"</span></span>/&gt;
        &lt;<span class="pl-ent">result</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>amount<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>order_amount<span class="pl-pds">"</span></span>/&gt;
        &lt;<span class="pl-ent">result</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>date<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>order_date<span class="pl-pds">"</span></span>/&gt;
    &lt;/<span class="pl-ent">collection</span>&gt;
&lt;/<span class="pl-ent">resultMap</span>&gt;

&lt;<span class="pl-ent">select</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>selectUser<span class="pl-pds">"</span></span> <span class="pl-e">resultMap</span>=<span class="pl-s"><span class="pl-pds">"</span>userResultMap<span class="pl-pds">"</span></span>&gt;
    SELECT u.user_id, u.user_name, o.order_id, o.order_amount, o.order_date
    FROM users u
    JOIN orders o ON u.user_id = o.user_id
    WHERE u.user_id = #{userId}
&lt;/<span class="pl-ent">select</span>&gt;</pre></div>
<p>在这个示例中，<code class="notranslate">userResultMap</code>定义了用户和订单之间的一对多映射关系。</p>
<h4>多对多映射</h4>
<p>多对多映射是指一个对象包含多个子对象，每个子对象又包含多个父对象的情况。例如，学生对象包含多个课程对象，课程对象也包含多个学生对象。</p>
<h5>总结</h5>
<p>对一 属性中包含对象方法</p>
<p>对多 属性中包含对象集合</p>
<p><strong>示例</strong>：</p>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">resultMap</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>studentResultMap<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>com.example.model.Student<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">id</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>student_id<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">result</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>student_name<span class="pl-pds">"</span></span>/&gt;
    &lt;<span class="pl-ent">collection</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>courses<span class="pl-pds">"</span></span> <span class="pl-e">ofType</span>=<span class="pl-s"><span class="pl-pds">"</span>com.example.model.Course<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">id</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>course_id<span class="pl-pds">"</span></span>/&gt;
        &lt;<span class="pl-ent">result</span> <span class="pl-e">property</span>=<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span> <span class="pl-e">column</span>=<span class="pl-s"><span class="pl-pds">"</span>course_name<span class="pl-pds">"</span></span>/&gt;
    &lt;/<span class="pl-ent">collection</span>&gt;
&lt;/<span class="pl-ent">resultMap</span>&gt;

&lt;<span class="pl-ent">select</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>selectStudent<span class="pl-pds">"</span></span> <span class="pl-e">resultMap</span>=<span class="pl-s"><span class="pl-pds">"</span>studentResultMap<span class="pl-pds">"</span></span>&gt;
    SELECT s.student_id, s.student_name, c.course_id, c.course_name
    FROM students s
    JOIN student_courses sc ON s.student_id = sc.student_id
    JOIN courses c ON sc.course_id = c.course_id
    WHERE s.student_id = #{studentId}
&lt;/<span class="pl-ent">select</span>&gt;</pre></div>
<p>在这个示例中，<code class="notranslate">studentResultMap</code>定义了学生和课程之间的多对多映射关系。</p>
<p>通过ResultMap，MyBatis可以灵活地处理各种复杂的映射关系，满足不同的业务需求.</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/41f9f855d9ed03efee9d837be55e3a7f54c0af6035ee1f5b23c4ab09de3c527d/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333339393639343636322d37373065346536622d656635642d343861372d623234332d6639356630343830393362642e706e67"><img src="https://camo.githubusercontent.com/41f9f855d9ed03efee9d837be55e3a7f54c0af6035ee1f5b23c4ab09de3c527d/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333339393639343636322d37373065346536622d656635642d343861372d623234332d6639356630343830393362642e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733399694662-770e4e6b-ef5d-48a7-b243-f95f048093bd.png" style="max-width: 100%;"></a>只有双表查，没有多表查</p>
<p>若有多张表可以拆成双表</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/7a18d84ff0aeb60ef8393824cd8977fc488f6d27fdd50dacdb32d72eac38065b/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333339393934383439302d38666161393332662d336538322d343861382d386533662d3635363630646237663438362e706e67"><img src="https://camo.githubusercontent.com/7a18d84ff0aeb60ef8393824cd8977fc488f6d27fdd50dacdb32d72eac38065b/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333339393934383439302d38666161393332662d336538322d343861382d386533662d3635363630646237663438362e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733399948490-8faa932f-3e82-48a8-8e3f-65660db7f486.png" style="max-width: 100%;"></a></p>
<h3>MyBatis动态语句</h3>
<p>MyBatis动态语句允许开发者根据不同的条件动态生成SQL语句，从而提高查询的灵活性和可维护性。MyBatis提供了一系列的动态SQL标签，如<code class="notranslate">&lt;if&gt;</code>、<code class="notranslate">&lt;choose&gt;</code>、<code class="notranslate">&lt;when&gt;</code>、<code class="notranslate">&lt;otherwise&gt;</code>、<code class="notranslate">&lt;trim&gt;</code>、<code class="notranslate">&lt;where&gt;</code>、<code class="notranslate">&lt;set&gt;</code>和<code class="notranslate">&lt;foreach&gt;</code>，这些标签可以在Mapper XML文件中使用。</p>
<h4>常用动态SQL标签</h4>
<ol>
<li><code class="notranslate">&lt;if&gt;</code><strong>标签</strong>
<ul>
<li>用于根据条件动态生成SQL片段。</li>
<li>示例：</li>
</ul>
</li>
</ol>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">select</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>findUserById<span class="pl-pds">"</span></span> <span class="pl-e">parameterType</span>=<span class="pl-s"><span class="pl-pds">"</span>int<span class="pl-pds">"</span></span> <span class="pl-e">resultType</span>=<span class="pl-s"><span class="pl-pds">"</span>User<span class="pl-pds">"</span></span>&gt;
    SELECT * FROM users
    &lt;<span class="pl-ent">where</span>&gt;
        &lt;<span class="pl-ent">if</span> <span class="pl-e">test</span>=<span class="pl-s"><span class="pl-pds">"</span>id != null<span class="pl-pds">"</span></span>&gt;
            id = #{id}
        &lt;/<span class="pl-ent">if</span>&gt;
    &lt;/<span class="pl-ent">where</span>&gt;
&lt;/<span class="pl-ent">select</span>&gt;</pre></div>
<ol>
<li><code class="notranslate">&lt;choose&gt;</code><strong>、</strong><code class="notranslate">&lt;when&gt;</code><strong>和</strong><code class="notranslate">&lt;otherwise&gt;</code><strong>标签</strong>
<ul>
<li>类似于Java中的<code class="notranslate">switch</code>语句，用于根据不同的条件生成不同的SQL片段。</li>
<li>示例：</li>
</ul>
</li>
</ol>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">select</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>findUser<span class="pl-pds">"</span></span> <span class="pl-e">parameterType</span>=<span class="pl-s"><span class="pl-pds">"</span>map<span class="pl-pds">"</span></span> <span class="pl-e">resultType</span>=<span class="pl-s"><span class="pl-pds">"</span>User<span class="pl-pds">"</span></span>&gt;
    SELECT * FROM users
    &lt;<span class="pl-ent">where</span>&gt;
        &lt;<span class="pl-ent">choose</span>&gt;
            &lt;<span class="pl-ent">when</span> <span class="pl-e">test</span>=<span class="pl-s"><span class="pl-pds">"</span>id != null<span class="pl-pds">"</span></span>&gt;
                id = #{id}
            &lt;/<span class="pl-ent">when</span>&gt;
            &lt;<span class="pl-ent">when</span> <span class="pl-e">test</span>=<span class="pl-s"><span class="pl-pds">"</span>name != null<span class="pl-pds">"</span></span>&gt;
                name = #{name}
            &lt;/<span class="pl-ent">when</span>&gt;
            &lt;<span class="pl-ent">otherwise</span>&gt;
                1 = 1
            &lt;/<span class="pl-ent">otherwise</span>&gt;
        &lt;/<span class="pl-ent">choose</span>&gt;
    &lt;/<span class="pl-ent">where</span>&gt;
&lt;/<span class="pl-ent">select</span>&gt;</pre></div>
<ol>
<li><code class="notranslate">&lt;trim&gt;</code><strong>标签</strong>
<ul>
<li>用于去除SQL片段的前后多余字符，如逗号、AND、OR等。</li>
<li>示例：</li>
</ul>
</li>
</ol>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">update</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>updateUser<span class="pl-pds">"</span></span> <span class="pl-e">parameterType</span>=<span class="pl-s"><span class="pl-pds">"</span>User<span class="pl-pds">"</span></span>&gt;
    UPDATE users
    &lt;<span class="pl-ent">set</span>&gt;
        &lt;<span class="pl-ent">trim</span> <span class="pl-e">suffixOverrides</span>=<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>&gt;
            &lt;<span class="pl-ent">if</span> <span class="pl-e">test</span>=<span class="pl-s"><span class="pl-pds">"</span>name != null<span class="pl-pds">"</span></span>&gt;name = #{name},&lt;/<span class="pl-ent">if</span>&gt;
            &lt;<span class="pl-ent">if</span> <span class="pl-e">test</span>=<span class="pl-s"><span class="pl-pds">"</span>email != null<span class="pl-pds">"</span></span>&gt;email = #{email},&lt;/<span class="pl-ent">if</span>&gt;
        &lt;/<span class="pl-ent">trim</span>&gt;
    &lt;/<span class="pl-ent">set</span>&gt;
    WHERE id = #{id}
&lt;/<span class="pl-ent">update</span>&gt;</pre></div>
<ol>
<li><code class="notranslate">&lt;where&gt;</code><strong>标签</strong>
<ul>
<li>用于自动处理WHERE子句的AND/OR逻辑，避免SQL语句中出现多余的AND/OR。</li>
<li>示例：</li>
</ul>
</li>
</ol>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">select</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>findUserByConditions<span class="pl-pds">"</span></span> <span class="pl-e">parameterType</span>=<span class="pl-s"><span class="pl-pds">"</span>map<span class="pl-pds">"</span></span> <span class="pl-e">resultType</span>=<span class="pl-s"><span class="pl-pds">"</span>User<span class="pl-pds">"</span></span>&gt;
    SELECT * FROM users
    &lt;<span class="pl-ent">where</span>&gt;
        &lt;<span class="pl-ent">if</span> <span class="pl-e">test</span>=<span class="pl-s"><span class="pl-pds">"</span>id != null<span class="pl-pds">"</span></span>&gt;id = #{id}&lt;/<span class="pl-ent">if</span>&gt;
        &lt;<span class="pl-ent">if</span> <span class="pl-e">test</span>=<span class="pl-s"><span class="pl-pds">"</span>name != null<span class="pl-pds">"</span></span>&gt;AND name = #{name}&lt;/<span class="pl-ent">if</span>&gt;
    &lt;/<span class="pl-ent">where</span>&gt;
&lt;/<span class="pl-ent">select</span>&gt;</pre></div>
<ol>
<li><code class="notranslate">&lt;set&gt;</code><strong>标签</strong>
<ul>
<li>用于动态生成UPDATE语句中的SET子句，自动去除多余的逗号。</li>
<li>示例：</li>
</ul>
</li>
</ol>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">update</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>updateUser<span class="pl-pds">"</span></span> <span class="pl-e">parameterType</span>=<span class="pl-s"><span class="pl-pds">"</span>User<span class="pl-pds">"</span></span>&gt;
    UPDATE users
    &lt;<span class="pl-ent">set</span>&gt;
        &lt;<span class="pl-ent">if</span> <span class="pl-e">test</span>=<span class="pl-s"><span class="pl-pds">"</span>name != null<span class="pl-pds">"</span></span>&gt;name = #{name},&lt;/<span class="pl-ent">if</span>&gt;
        &lt;<span class="pl-ent">if</span> <span class="pl-e">test</span>=<span class="pl-s"><span class="pl-pds">"</span>email != null<span class="pl-pds">"</span></span>&gt;email = #{email},&lt;/<span class="pl-ent">if</span>&gt;
    &lt;/<span class="pl-ent">set</span>&gt;
    WHERE id = #{id}
&lt;/<span class="pl-ent">update</span>&gt;</pre></div>
<ol>
<li><code class="notranslate">&lt;foreach&gt;</code><strong>标签</strong>
<ul>
<li>用于遍历集合生成SQL片段，常用于IN查询和批量操作。</li>
<li>示例：</li>
</ul>
</li>
</ol>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">select</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>findUsersByIds<span class="pl-pds">"</span></span> <span class="pl-e">parameterType</span>=<span class="pl-s"><span class="pl-pds">"</span>list<span class="pl-pds">"</span></span> <span class="pl-e">resultType</span>=<span class="pl-s"><span class="pl-pds">"</span>User<span class="pl-pds">"</span></span>&gt;
    SELECT * FROM users
    WHERE id IN
    &lt;<span class="pl-ent">foreach</span> <span class="pl-e">item</span>=<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span> <span class="pl-e">collection</span>=<span class="pl-s"><span class="pl-pds">"</span>list<span class="pl-pds">"</span></span> <span class="pl-e">open</span>=<span class="pl-s"><span class="pl-pds">"</span>(<span class="pl-pds">"</span></span> <span class="pl-e">separator</span>=<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span> <span class="pl-e">close</span>=<span class="pl-s"><span class="pl-pds">"</span>)<span class="pl-pds">"</span></span>&gt;
        #{id}
    &lt;/<span class="pl-ent">foreach</span>&gt;
&lt;/<span class="pl-ent">select</span>&gt;</pre></div>
<h3>MyBatis动态SQL语句的使用</h3>
<p>在MyBatis中，可以通过动态SQL语句来根据不同的条件生成不同的SQL查询。以下是如何使用动态SQL语句来实现条件查询的示例：</p>
<h4>示例方法</h4>
<div class="highlight highlight-source-java"><pre class="notranslate"><span class="pl-smi">List</span>&lt;<span class="pl-smi">Employee</span>&gt; <span class="pl-en">query</span>(<span class="pl-c1">@</span><span class="pl-c1">Param</span>(<span class="pl-s">"name"</span>) <span class="pl-smi">String</span> <span class="pl-s1">name</span>, <span class="pl-c1">@</span><span class="pl-c1">Param</span>(<span class="pl-s">"salary"</span>) <span class="pl-smi">Double</span> <span class="pl-s1">salary</span>);</pre></div>
<p>如果传入属性，就判断相等；如果不传入，则不加对应的条件。</p>
<h4>动态SQL语句</h4>
<p>使用<code class="notranslate">&lt;where&gt;</code>标签和<code class="notranslate">&lt;if&gt;</code>标签来实现动态SQL语句：</p>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">select</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>query<span class="pl-pds">"</span></span> <span class="pl-e">resultType</span>=<span class="pl-s"><span class="pl-pds">"</span>Employee<span class="pl-pds">"</span></span>&gt;
    SELECT * FROM employee
    &lt;<span class="pl-ent">where</span>&gt;
        &lt;<span class="pl-ent">if</span> <span class="pl-e">test</span>=<span class="pl-s"><span class="pl-pds">"</span>name != null<span class="pl-pds">"</span></span>&gt;
            emp_name = #{name}
        &lt;/<span class="pl-ent">if</span>&gt;
        &lt;<span class="pl-ent">if</span> <span class="pl-e">test</span>=<span class="pl-s"><span class="pl-pds">"</span>salary != null and salary <span class="pl-c1">&amp;gt;</span> 100<span class="pl-pds">"</span></span>&gt;
            AND emp_salary = #{salary}
        &lt;/<span class="pl-ent">if</span>&gt;
    &lt;/<span class="pl-ent">where</span>&gt;
&lt;/<span class="pl-ent">select</span>&gt;</pre></div>
<h4>解释</h4>
<ol>
<li><code class="notranslate">&lt;where&gt;</code><strong>标签的作用</strong>：
<ul>
<li>自动添加<code class="notranslate">WHERE</code>关键字：如果<code class="notranslate">&lt;where&gt;</code>标签内部有任何一个<code class="notranslate">&lt;if&gt;</code>条件满足，则自动添加<code class="notranslate">WHERE</code>关键字；如果不满足，则去掉<code class="notranslate">WHERE</code>。</li>
<li>自动去掉多余的<code class="notranslate">AND</code>和<code class="notranslate">OR</code>关键字：<code class="notranslate">&lt;where&gt;</code>标签会自动处理多余的<code class="notranslate">AND</code>和<code class="notranslate">OR</code>关键字，确保生成的SQL语句是正确的。</li>
</ul>
</li>
<li><code class="notranslate">&lt;if&gt;</code><strong>标签的作用</strong>：
<ul>
<li>判断传入的参数，最终是否添加语句。</li>
<li><code class="notranslate">test</code>属性内部做比较运算，如果结果为<code class="notranslate">true</code>，则将标签内的SQL语句进行拼接；如果为<code class="notranslate">false</code>，则不拼接标签内部语句。</li>
</ul>
</li>
</ol>
<h4>注意事项</h4>
<ul>
<li><strong>大于和小于符号</strong>：不推荐直接写符号，可以使用HTML实体符号，如<code class="notranslate">&amp;gt;</code>（大于）和<code class="notranslate">&amp;lt;</code>（小于）。</li>
<li><strong>避免错误的SQL语句</strong>：确保<code class="notranslate">&lt;if&gt;</code>标签内部的条件判断正确，避免生成错误的SQL语句。例如，如果第一个条件不满足，而第二个条件满足，则会生成错误的SQL语句<code class="notranslate">WHERE AND emp_salary = #{salary}</code>。</li>
</ul>
<p>通过使用动态SQL语句，可以根据不同的条件生成灵活的查询语句，提高查询的灵活性和可维护性。</p>
<h3>MyBatis中的动态SQL标签</h3>
<p>MyBatis提供了一系列动态SQL标签，用于根据不同的条件动态生成SQL语句。以下是一些常用的动态SQL标签及其用法：</p>
<h4>1. <code class="notranslate">&lt;set&gt;</code>标签</h4>
<ul>
<li><strong>用途</strong>：用于动态生成<code class="notranslate">UPDATE</code>语句中的<code class="notranslate">SET</code>子句，自动去除多余的逗号。</li>
<li><strong>示例</strong>：</li>
</ul>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">update</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>updateUser<span class="pl-pds">"</span></span> <span class="pl-e">parameterType</span>=<span class="pl-s"><span class="pl-pds">"</span>User<span class="pl-pds">"</span></span>&gt;
    UPDATE users
    &lt;<span class="pl-ent">set</span>&gt;
        &lt;<span class="pl-ent">if</span> <span class="pl-e">test</span>=<span class="pl-s"><span class="pl-pds">"</span>name != null<span class="pl-pds">"</span></span>&gt;name = #{name},&lt;/<span class="pl-ent">if</span>&gt;
        &lt;<span class="pl-ent">if</span> <span class="pl-e">test</span>=<span class="pl-s"><span class="pl-pds">"</span>email != null<span class="pl-pds">"</span></span>&gt;email = #{email},&lt;/<span class="pl-ent">if</span>&gt;
    &lt;/<span class="pl-ent">set</span>&gt;
    WHERE id = #{id}
&lt;/<span class="pl-ent">update</span>&gt;</pre></div>
<p>在这个示例中，<code class="notranslate">&lt;set&gt;</code>标签会根据条件动态生成<code class="notranslate">SET</code>子句，并自动去除多余的逗号。</p>
<h4>2. <code class="notranslate">&lt;trim&gt;</code>标签</h4>
<ul>
<li><strong>用途</strong>：用于去除SQL片段的前后多余字符，如逗号、AND、OR等。</li>
<li><strong>属性</strong>：
<ul>
<li><code class="notranslate">prefix</code>：在生成的SQL片段前添加的字符串。</li>
<li><code class="notranslate">suffix</code>：在生成的SQL片段后添加的字符串。</li>
<li><code class="notranslate">prefixOverrides</code>：去除生成的SQL片段前的指定字符。</li>
<li><code class="notranslate">suffixOverrides</code>：去除生成的SQL片段后的指定字符。</li>
</ul>
</li>
<li><strong>示例</strong>：</li>
</ul>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">update</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>updateUser<span class="pl-pds">"</span></span> <span class="pl-e">parameterType</span>=<span class="pl-s"><span class="pl-pds">"</span>User<span class="pl-pds">"</span></span>&gt;
    UPDATE users
    &lt;<span class="pl-ent">trim</span> <span class="pl-e">prefix</span>=<span class="pl-s"><span class="pl-pds">"</span>SET<span class="pl-pds">"</span></span> <span class="pl-e">suffixOverrides</span>=<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">if</span> <span class="pl-e">test</span>=<span class="pl-s"><span class="pl-pds">"</span>name != null<span class="pl-pds">"</span></span>&gt;name = #{name},&lt;/<span class="pl-ent">if</span>&gt;
        &lt;<span class="pl-ent">if</span> <span class="pl-e">test</span>=<span class="pl-s"><span class="pl-pds">"</span>email != null<span class="pl-pds">"</span></span>&gt;email = #{email},&lt;/<span class="pl-ent">if</span>&gt;
    &lt;/<span class="pl-ent">trim</span>&gt;
    WHERE id = #{id}
&lt;/<span class="pl-ent">update</span>&gt;</pre></div>
<p>在这个示例中，<code class="notranslate">&lt;trim&gt;</code>标签会在生成的SQL片段前添加<code class="notranslate">SET</code>，并去除多余的逗号。</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/9d557bc32bf21e4b2ece3a5ecf0447b8940e786e939e403f8b291d59c1e7a38a/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430323338343537332d65323636613834632d343361652d346163362d393064322d3632633833653336613862362e706e67"><img src="https://camo.githubusercontent.com/9d557bc32bf21e4b2ece3a5ecf0447b8940e786e939e403f8b291d59c1e7a38a/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430323338343537332d65323636613834632d343361652d346163362d393064322d3632633833653336613862362e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733402384573-e266a84c-43ae-4ac6-90d2-62c83e36a8b6.png" style="max-width: 100%;"></a></p>
<h4>3. <code class="notranslate">&lt;choose&gt;</code>、<code class="notranslate">&lt;when&gt;</code>和<code class="notranslate">&lt;otherwise&gt;</code>标签</h4>
<ul>
<li><strong>用途</strong>：类似于Java中的<code class="notranslate">switch</code>语句，用于根据不同的条件生成不同的SQL片段。</li>
<li><strong>示例</strong>：</li>
</ul>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">select</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>findUser<span class="pl-pds">"</span></span> <span class="pl-e">parameterType</span>=<span class="pl-s"><span class="pl-pds">"</span>map<span class="pl-pds">"</span></span> <span class="pl-e">resultType</span>=<span class="pl-s"><span class="pl-pds">"</span>User<span class="pl-pds">"</span></span>&gt;
    SELECT * FROM users
    &lt;<span class="pl-ent">where</span>&gt;
        &lt;<span class="pl-ent">choose</span>&gt;
            &lt;<span class="pl-ent">when</span> <span class="pl-e">test</span>=<span class="pl-s"><span class="pl-pds">"</span>id != null<span class="pl-pds">"</span></span>&gt;
                id = #{id}
            &lt;/<span class="pl-ent">when</span>&gt;
            &lt;<span class="pl-ent">when</span> <span class="pl-e">test</span>=<span class="pl-s"><span class="pl-pds">"</span>name != null<span class="pl-pds">"</span></span>&gt;
                name = #{name}
            &lt;/<span class="pl-ent">when</span>&gt;
            &lt;<span class="pl-ent">otherwise</span>&gt;
                1 = 1
            &lt;/<span class="pl-ent">otherwise</span>&gt;
        &lt;/<span class="pl-ent">choose</span>&gt;
    &lt;/<span class="pl-ent">where</span>&gt;
&lt;/<span class="pl-ent">select</span>&gt;</pre></div>
<p>在这个示例中，<code class="notranslate">&lt;choose&gt;</code>标签会根据不同的条件生成不同的SQL片段。</p>
<p>它和if的区别，这个只能一个满足，if可以多个</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/66c06a8f8947fc4f446774fc4a25f6dfc9c63ccf965ef4cd928d7d769147bedd/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430323530353632302d39363039383066612d613939382d343462302d626539382d6334666339643939623330342e706e67"><img src="https://camo.githubusercontent.com/66c06a8f8947fc4f446774fc4a25f6dfc9c63ccf965ef4cd928d7d769147bedd/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430323530353632302d39363039383066612d613939382d343462302d626539382d6334666339643939623330342e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733402505620-960980fa-a998-44b0-be98-c4fc9d99b304.png" style="max-width: 100%;"></a></p>
<h4>4. <code class="notranslate">&lt;foreach&gt;</code>标签</h4>
<ul>
<li><strong>用途</strong>：用于遍历集合生成SQL片段，常用于IN查询和批量操作。</li>
<li><strong>属性</strong>：
<ul>
<li><code class="notranslate">item</code>：集合中每个元素的别名。</li>
<li><code class="notranslate">collection</code>：要遍历的集合。</li>
<li><code class="notranslate">open</code>：在生成的SQL片段前添加的字符串。</li>
<li><code class="notranslate">separator</code>：在生成的SQL片段之间添加的分隔符。</li>
<li><code class="notranslate">close</code>：在生成的SQL片段后添加的字符串。</li>
</ul>
</li>
<li><strong>示例</strong>：</li>
</ul>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">select</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>findUsersByIds<span class="pl-pds">"</span></span> <span class="pl-e">parameterType</span>=<span class="pl-s"><span class="pl-pds">"</span>list<span class="pl-pds">"</span></span> <span class="pl-e">resultType</span>=<span class="pl-s"><span class="pl-pds">"</span>User<span class="pl-pds">"</span></span>&gt;
    SELECT * FROM users
    WHERE id IN
    &lt;<span class="pl-ent">foreach</span> <span class="pl-e">item</span>=<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span> <span class="pl-e">collection</span>=<span class="pl-s"><span class="pl-pds">"</span>list<span class="pl-pds">"</span></span> <span class="pl-e">open</span>=<span class="pl-s"><span class="pl-pds">"</span>(<span class="pl-pds">"</span></span> <span class="pl-e">separator</span>=<span class="pl-s"><span class="pl-pds">"</span>,<span class="pl-pds">"</span></span> <span class="pl-e">close</span>=<span class="pl-s"><span class="pl-pds">"</span>)<span class="pl-pds">"</span></span>&gt;
        #{id}
    &lt;/<span class="pl-ent">foreach</span>&gt;
&lt;/<span class="pl-ent">select</span>&gt;</pre></div>
<p>在这个示例中，<code class="notranslate">&lt;foreach&gt;</code>标签会遍历集合<code class="notranslate">list</code>，生成<code class="notranslate">IN</code>查询的SQL片段。</p>
<p>在数据库url后面加?allowMultiQueries=true允许多语句执行</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/14c5237d63acb03d996cce98f97990fd21dae9b1a15479e7ebaddb7752e44c56/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430333737353336342d65633230633031352d363037632d343830362d386462352d3863646137323935623163362e706e67"><img src="https://camo.githubusercontent.com/14c5237d63acb03d996cce98f97990fd21dae9b1a15479e7ebaddb7752e44c56/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430333737353336342d65633230633031352d363037632d343830362d386462352d3863646137323935623163362e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733403775364-ec20c015-607c-4806-8db5-8cda7295b1c6.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/e6cebb8aaf75aa7275ba584ed81097ebf4a3b2eff2721d99c08aef0672d7d0c7/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430333739393434392d64636333313961662d383861312d346137392d623434322d6662366438633864306533612e706e67"><img src="https://camo.githubusercontent.com/e6cebb8aaf75aa7275ba584ed81097ebf4a3b2eff2721d99c08aef0672d7d0c7/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430333739393434392d64636333313961662d383861312d346137392d623434322d6662366438633864306533612e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733403799449-dcc319af-88a1-4a79-b442-fb6d8c8d0e3a.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/b9f2bbddf8755b93a21d35e2049e16e92fc5ad1bdeacfae459d9625459b0a322/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430333831343235312d36363064316537662d383537662d346436332d626162352d3335303333343333336437632e706e67"><img src="https://camo.githubusercontent.com/b9f2bbddf8755b93a21d35e2049e16e92fc5ad1bdeacfae459d9625459b0a322/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430333831343235312d36363064316537662d383537662d346436332d626162352d3335303333343333336437632e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733403814251-660d1e7f-857f-4d63-bab5-350334333d7c.png" style="max-width: 100%;"></a></p>
<p>update把整体的更新语句都遍历一遍，注意，要先允许多语句执行</p>
<h3>MyBatis中的SQL片段</h3>
<p>在MyBatis中，SQL片段（SQL Fragments）是一种用于重用SQL代码的机制。通过定义和引用SQL片段，可以避免重复编写相同的SQL代码，提高代码的可维护性和可读性。SQL片段通常使用<code class="notranslate">&lt;sql&gt;</code>和<code class="notranslate">&lt;include&gt;</code>标签来定义和引用。</p>
<h4>定义SQL片段</h4>
<p>使用<code class="notranslate">&lt;sql&gt;</code>标签定义一个SQL片段。<code class="notranslate">&lt;sql&gt;</code>标签通常放在Mapper XML文件的顶部。</p>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">sql</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>userColumns<span class="pl-pds">"</span></span>&gt;
    user_id, user_name, user_email
&lt;/<span class="pl-ent">sql</span>&gt;</pre></div>
<p>在这个示例中，定义了一个名为<code class="notranslate">userColumns</code>的SQL片段，包含了用户表的三个列名。</p>
<h4>引用SQL片段</h4>
<p>使用<code class="notranslate">&lt;include&gt;</code>标签引用一个SQL片段。<code class="notranslate">&lt;include&gt;</code>标签可以放在任何需要引用SQL片段的地方。</p>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">select</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>selectUser<span class="pl-pds">"</span></span> <span class="pl-e">resultType</span>=<span class="pl-s"><span class="pl-pds">"</span>User<span class="pl-pds">"</span></span>&gt;
    SELECT &lt;<span class="pl-ent">include</span> <span class="pl-e">refid</span>=<span class="pl-s"><span class="pl-pds">"</span>userColumns<span class="pl-pds">"</span></span>/&gt;
    FROM users
    WHERE user_id = #{id}
&lt;/<span class="pl-ent">select</span>&gt;</pre></div>
<p>在这个示例中，使用<code class="notranslate">&lt;include&gt;</code>标签引用了<code class="notranslate">userColumns</code> SQL片段，从而避免了重复编写列名。</p>
<h4>动态SQL片段</h4>
<p>SQL片段也可以包含动态SQL标签，如<code class="notranslate">&lt;if&gt;</code>、<code class="notranslate">&lt;choose&gt;</code>等，从而实现更复杂的SQL重用。</p>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">sql</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>dynamicUserColumns<span class="pl-pds">"</span></span>&gt;
    user_id,
    &lt;<span class="pl-ent">if</span> <span class="pl-e">test</span>=<span class="pl-s"><span class="pl-pds">"</span>includeName<span class="pl-pds">"</span></span>&gt;
        user_name,
    &lt;/<span class="pl-ent">if</span>&gt;
    user_email
&lt;/<span class="pl-ent">sql</span>&gt;

&lt;<span class="pl-ent">select</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>selectUser<span class="pl-pds">"</span></span> <span class="pl-e">resultType</span>=<span class="pl-s"><span class="pl-pds">"</span>User<span class="pl-pds">"</span></span>&gt;
    SELECT &lt;<span class="pl-ent">include</span> <span class="pl-e">refid</span>=<span class="pl-s"><span class="pl-pds">"</span>dynamicUserColumns<span class="pl-pds">"</span></span>/&gt;
    FROM users
    WHERE user_id = #{id}
&lt;/<span class="pl-ent">select</span>&gt;</pre></div>
<p>在这个示例中，<code class="notranslate">dynamicUserColumns</code> SQL片段包含了一个动态SQL标签<code class="notranslate">&lt;if&gt;</code>，根据条件决定是否包含<code class="notranslate">user_name</code>列。</p>
<h3>MyBatis Mapper按包批量扫描</h3>
<p>在MyBatis中，Mapper按包批量扫描是一种简化配置的方式，通过指定包路径，自动扫描并注册Mapper接口。这样可以避免手动一个一个地配置Mapper接口，提高开发效率。</p>
<h4>配置步骤</h4>
<p>建议使用第二种，上下创建相同结构的配置文件</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/f7fb5635573fb65e9191a404e2e3077d2418d5ab0eb72c9218990e2b8e8789b1/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430343330323137392d38626337356130302d616163372d346131622d623464662d6531353465333037663564332e706e67"><img src="https://camo.githubusercontent.com/f7fb5635573fb65e9191a404e2e3077d2418d5ab0eb72c9218990e2b8e8789b1/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430343330323137392d38626337356130302d616163372d346131622d623464662d6531353465333037663564332e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733404302179-8bc75a00-aac7-4a1b-b4df-e154e307f5d3.png" style="max-width: 100%;"></a></p>
<p>注意，创建的时候要写斜杠，不然就是一个文件夹</p>
<p>编译产物</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/40537826371d6aca2c713202c30bba11025bdcbe05de98c96474931410a9275e/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430343436303233362d63303063666135312d613833612d346663312d623530362d6661373266663862326532312e706e67"><img src="https://camo.githubusercontent.com/40537826371d6aca2c713202c30bba11025bdcbe05de98c96474931410a9275e/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430343436303233362d63303063666135312d613833612d346663312d623530362d6661373266663862326532312e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733404460236-c00cfa51-a83a-4fc1-b506-fa72ff8b2e21.png" style="max-width: 100%;"></a></p>
<ol>
<li><strong>引入依赖</strong><br>
在项目的<code class="notranslate">pom.xml</code>文件中添加MyBatis和Spring Boot相关的依赖：</li>
</ol>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">dependencies</span>&gt;
    &lt;<span class="pl-ent">dependency</span>&gt;
        &lt;<span class="pl-ent">groupId</span>&gt;org.mybatis.spring.boot&lt;/<span class="pl-ent">groupId</span>&gt;
        &lt;<span class="pl-ent">artifactId</span>&gt;mybatis-spring-boot-starter&lt;/<span class="pl-ent">artifactId</span>&gt;
        &lt;<span class="pl-ent">version</span>&gt;2.2.0&lt;/<span class="pl-ent">version</span>&gt;
    &lt;/<span class="pl-ent">dependency</span>&gt;
&lt;/<span class="pl-ent">dependencies</span>&gt;</pre></div>
<ol>
<li><strong>配置Mapper扫描</strong><br>
在Spring Boot配置类中使用<code class="notranslate">@MapperScan</code>注解，指定Mapper接口所在的包路径：</li>
</ol>
<div class="highlight highlight-source-java"><pre class="notranslate"><span class="pl-c1">@</span><span class="pl-c1">SpringBootApplication</span>
<span class="pl-c1">@</span><span class="pl-c1">MapperScan</span>(<span class="pl-s">"com.example.mapper"</span>)
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-smi">MyBatisApplication</span> {
    <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">void</span> <span class="pl-en">main</span>(<span class="pl-smi">String</span>[] <span class="pl-s1">args</span>) {
        <span class="pl-smi">SpringApplication</span>.<span class="pl-en">run</span>(<span class="pl-smi">MyBatisApplication</span>.<span class="pl-k">class</span>, <span class="pl-s1">args</span>);
    }
}</pre></div>
<ol>
<li><strong>定义Mapper接口</strong><br>
在指定的包路径下定义Mapper接口，并使用MyBatis的注解或XML文件配置SQL语句：</li>
</ol>
<div class="highlight highlight-source-java"><pre class="notranslate"><span class="pl-c1">@</span><span class="pl-c1">Mapper</span>
<span class="pl-k">public</span> <span class="pl-k">interface</span> <span class="pl-smi">UserMapper</span> {
    <span class="pl-c1">@</span><span class="pl-c1">Select</span>(<span class="pl-s">"SELECT * FROM users WHERE id = #{id}"</span>)
    <span class="pl-smi">User</span> <span class="pl-en">selectUser</span>(<span class="pl-smi">int</span> <span class="pl-s1">id</span>);
}</pre></div>
<ol>
<li><strong>使用Mapper接口</strong><br>
在Service类中注入Mapper接口，并调用其方法：</li>
</ol>
<div class="highlight highlight-source-java"><pre class="notranslate"><span class="pl-c1">@</span><span class="pl-c1">Service</span>
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-smi">UserService</span> {
    <span class="pl-c1">@</span><span class="pl-c1">Autowired</span>
    <span class="pl-k">private</span> <span class="pl-smi">UserMapper</span> <span class="pl-s1">userMapper</span>;

    <span class="pl-k">public</span> <span class="pl-smi">User</span> <span class="pl-en">getUserById</span>(<span class="pl-smi">int</span> <span class="pl-s1">id</span>) {
        <span class="pl-k">return</span> <span class="pl-s1">userMapper</span>.<span class="pl-en">selectUser</span>(<span class="pl-s1">id</span>);
    }
}</pre></div>
<p>通过以上配置，Spring Boot会自动扫描<code class="notranslate">com.example.mapper</code>包下的所有Mapper接口，并将其注册为Spring Bean，从而简化了Mapper接口的配置过程。</p>
<h3>MyBatis插件机制</h3>
<p>MyBatis插件机制允许开发者通过编写插件来拦截和修改MyBatis的核心行为，如SQL执行、参数处理和结果映射等。插件机制使得MyBatis具有很高的可扩展性，能够满足各种复杂的业务需求。</p>
<h4>插件的基本原理</h4>
<p>MyBatis插件通过实现<code class="notranslate">Interceptor</code>接口，并使用<code class="notranslate">@Intercepts</code>和<code class="notranslate">@Signature</code>注解来定义拦截点。拦截点可以是MyBatis的四种核心对象的方法：</p>
<ol>
<li><strong>Executor</strong>：执行器，负责SQL语句的执行。</li>
<li><strong>ParameterHandler</strong>：参数处理器，负责SQL参数的处理。</li>
<li><strong>ResultSetHandler</strong>：结果集处理器，负责结果集的处理。</li>
<li><strong>StatementHandler</strong>：语句处理器，负责SQL语句的预处理。</li>
</ol>
<h4>插件的实现步骤</h4>
<ol>
<li><strong>实现</strong><code class="notranslate">Interceptor</code><strong>接口</strong></li>
</ol>
<div class="highlight highlight-source-java"><pre class="notranslate"><span class="pl-c1">@</span><span class="pl-c1">Intercepts</span>({
    <span class="pl-c1">@</span><span class="pl-c1">Signature</span>(<span class="pl-s1">type</span> = <span class="pl-smi">Executor</span>.<span class="pl-k">class</span>, <span class="pl-s1">method</span> = <span class="pl-s">"update"</span>, <span class="pl-s1">args</span> = {<span class="pl-smi">MappedStatement</span>.<span class="pl-k">class</span>, <span class="pl-smi">Object</span>.<span class="pl-k">class</span>}),
    <span class="pl-c1">@</span><span class="pl-c1">Signature</span>(<span class="pl-s1">type</span> = <span class="pl-smi">Executor</span>.<span class="pl-k">class</span>, <span class="pl-s1">method</span> = <span class="pl-s">"query"</span>, <span class="pl-s1">args</span> = {<span class="pl-smi">MappedStatement</span>.<span class="pl-k">class</span>, <span class="pl-smi">Object</span>.<span class="pl-k">class</span>, <span class="pl-smi">RowBounds</span>.<span class="pl-k">class</span>, <span class="pl-smi">ResultHandler</span>.<span class="pl-k">class</span>})
})
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-smi">MyPlugin</span> <span class="pl-k">implements</span> <span class="pl-smi">Interceptor</span> {
    <span class="pl-c1">@</span><span class="pl-c1">Override</span>
    <span class="pl-k">public</span> <span class="pl-smi">Object</span> <span class="pl-en">intercept</span>(<span class="pl-smi">Invocation</span> <span class="pl-s1">invocation</span>) <span class="pl-k">throws</span> <span class="pl-smi">Throwable</span> {
        <span class="pl-c">// 在这里编写拦截逻辑</span>
        <span class="pl-k">return</span> <span class="pl-s1">invocation</span>.<span class="pl-en">proceed</span>();
    }

    <span class="pl-c1">@</span><span class="pl-c1">Override</span>
    <span class="pl-k">public</span> <span class="pl-smi">Object</span> <span class="pl-en">plugin</span>(<span class="pl-smi">Object</span> <span class="pl-s1">target</span>) {
        <span class="pl-k">return</span> <span class="pl-smi">Plugin</span>.<span class="pl-en">wrap</span>(<span class="pl-s1">target</span>, <span class="pl-smi">this</span>);
    }

    <span class="pl-c1">@</span><span class="pl-c1">Override</span>
    <span class="pl-k">public</span> <span class="pl-smi">void</span> <span class="pl-en">setProperties</span>(<span class="pl-smi">Properties</span> <span class="pl-s1">properties</span>) {
        <span class="pl-c">// 设置插件属性</span>
    }
}</pre></div>
<ol>
<li><strong>注册插件</strong><br>
在MyBatis配置文件中注册插件：</li>
</ol>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">plugins</span>&gt;
    &lt;<span class="pl-ent">plugin</span> <span class="pl-e">interceptor</span>=<span class="pl-s"><span class="pl-pds">"</span>com.example.MyPlugin<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">property</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>someProperty<span class="pl-pds">"</span></span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>/&gt;
    &lt;/<span class="pl-ent">plugin</span>&gt;
&lt;/<span class="pl-ent">plugins</span>&gt;</pre></div>
<h3>PageHelper分页插件</h3>
<p>PageHelper是一个MyBatis的分页插件，能够简化分页查询的实现。它通过拦截SQL语句，在执行查询前后自动添加分页逻辑，从而实现分页功能。</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/646be1dbcaad5371fe1858b4ec3d27df97eef7df20c44e1563c6ebd5a4fce1ae/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430343733303231342d64373066366132362d326134642d343537622d616136312d3635623939336530663330312e706e67"><img src="https://camo.githubusercontent.com/646be1dbcaad5371fe1858b4ec3d27df97eef7df20c44e1563c6ebd5a4fce1ae/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430343733303231342d64373066366132362d326134642d343537622d616136312d3635623939336530663330312e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733404730214-d70f6a26-2a4d-457b-aa61-65b993e0f301.png" style="max-width: 100%;"></a></p>
<h4>PageHelper的使用步骤</h4>
<ol>
<li><strong>引入依赖</strong><br>
在项目的<code class="notranslate">pom.xml</code>文件中添加PageHelper的依赖：</li>
</ol>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">dependency</span>&gt;
    &lt;<span class="pl-ent">groupId</span>&gt;com.github.pagehelper&lt;/<span class="pl-ent">groupId</span>&gt;
    &lt;<span class="pl-ent">artifactId</span>&gt;pagehelper-spring-boot-starter&lt;/<span class="pl-ent">artifactId</span>&gt;
    &lt;<span class="pl-ent">version</span>&gt;1.2.13&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre></div>
<ol>
<li><strong>配置PageHelper</strong><br>
在Spring Boot配置类中配置PageHelper：</li>
</ol>
<div class="highlight highlight-source-java"><pre class="notranslate"><span class="pl-c1">@</span><span class="pl-c1">Configuration</span>
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-smi">MyBatisConfig</span> {
    <span class="pl-c1">@</span><span class="pl-c1">Bean</span>
    <span class="pl-k">public</span> <span class="pl-smi">PageHelper</span> <span class="pl-en">pageHelper</span>() {
        <span class="pl-smi">PageHelper</span> <span class="pl-s1">pageHelper</span> = <span class="pl-k">new</span> <span class="pl-smi">PageHelper</span>();
        <span class="pl-smi">Properties</span> <span class="pl-s1">properties</span> = <span class="pl-k">new</span> <span class="pl-smi">Properties</span>();
        <span class="pl-s1">properties</span>.<span class="pl-en">setProperty</span>(<span class="pl-s">"helperDialect"</span>, <span class="pl-s">"mysql"</span>);
        <span class="pl-s1">properties</span>.<span class="pl-en">setProperty</span>(<span class="pl-s">"reasonable"</span>, <span class="pl-s">"true"</span>);
        <span class="pl-s1">properties</span>.<span class="pl-en">setProperty</span>(<span class="pl-s">"supportMethodsArguments"</span>, <span class="pl-s">"true"</span>);
        <span class="pl-s1">properties</span>.<span class="pl-en">setProperty</span>(<span class="pl-s">"params"</span>, <span class="pl-s">"count=countSql"</span>);
        <span class="pl-s1">pageHelper</span>.<span class="pl-en">setProperties</span>(<span class="pl-s1">properties</span>);
        <span class="pl-k">return</span> <span class="pl-s1">pageHelper</span>;
    }
}</pre></div>
<ol>
<li><strong>使用PageHelper进行分页查询</strong><br>
在Service层或Mapper接口中使用PageHelper进行分页查询：</li>
</ol>
<div class="highlight highlight-source-java"><pre class="notranslate"><span class="pl-c1">@</span><span class="pl-c1">Service</span>
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-smi">UserService</span> {
    <span class="pl-c1">@</span><span class="pl-c1">Autowired</span>
    <span class="pl-k">private</span> <span class="pl-smi">UserMapper</span> <span class="pl-s1">userMapper</span>;

    <span class="pl-k">public</span> <span class="pl-smi">PageInfo</span>&lt;<span class="pl-smi">User</span>&gt; <span class="pl-en">getUsers</span>(<span class="pl-smi">int</span> <span class="pl-s1">pageNum</span>, <span class="pl-smi">int</span> <span class="pl-s1">pageSize</span>) {
        <span class="pl-smi">PageHelper</span>.<span class="pl-en">startPage</span>(<span class="pl-s1">pageNum</span>, <span class="pl-s1">pageSize</span>);
        <span class="pl-smi">List</span>&lt;<span class="pl-smi">User</span>&gt; <span class="pl-s1">users</span> = <span class="pl-s1">userMapper</span>.<span class="pl-en">selectAll</span>();
        <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">PageInfo</span>&lt;&gt;(<span class="pl-s1">users</span>);
    }
}</pre></div>
<p>通过以上配置和代码，PageHelper会自动拦截SQL语句，并在执行查询前后添加分页逻辑，从而实现分页功能。</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/0babbfae909b96d30689123322b7d784b31362caeb17a5e2d7b83205971dc6ee/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430353035313034332d39363563376365352d313063652d343366342d393336342d3139363965323838636362352e706e67"><img src="https://camo.githubusercontent.com/0babbfae909b96d30689123322b7d784b31362caeb17a5e2d7b83205971dc6ee/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430353035313034332d39363563376365352d313063652d343366342d393336342d3139363965323838636362352e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733405051043-965c7ce5-10ce-43f4-9364-1969e288ccb5.png" style="max-width: 100%;"></a></p>
<p>注意：正常编写语句即可，切记不要写分号结尾</p>
<h3>MyBatis的ORM介绍和逆向工程</h3>
<h4>什么是ORM？</h4>
<p>ORM（Object-Relational Mapping，面向对象关系映射）是一种技术，用于在面向对象编程语言（如Java、C#）和关系数据库之间建立映射关系。ORM通过将数据库中的表映射为编程语言中的类，将表中的记录映射为类的实例，从而简化了数据库操作，使开发者可以使用面向对象的方式来操作数据库。</p>
<h4>ORM的优点</h4>
<ol>
<li><strong>提高开发效率</strong>：通过自动生成SQL语句，减少了手动编写SQL的工作量。</li>
<li><strong>增强可维护性</strong>：通过面向对象的方式操作数据库，使代码更加清晰、易于维护。</li>
<li><strong>减少错误</strong>：通过自动生成SQL语句，减少了手动编写SQL时可能出现的错误。</li>
<li><strong>跨数据库支持</strong>：ORM框架通常支持多种数据库，使得应用程序可以更容易地切换数据库。</li>
</ol>
<h4>常见的ORM框架</h4>
<ol>
<li><strong>Hibernate</strong>：一个流行的Java ORM框架，提供了强大的映射功能和丰富的配置选项。</li>
<li><strong>MyBatis</strong>：一个半自动化的ORM框架，允许开发者手动编写SQL语句，同时提供了自动映射功能。</li>
<li><strong>Entity Framework</strong>：一个用于.NET的ORM框架，提供了强大的数据库操作功能。</li>
</ol>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/453a2a989ca13fb7b532866aa59da6a3fbcd522910e66f6e14b940bbc199d36d/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430353837383733302d31303439333630392d306632332d343939622d383439352d3334633238323965643265372e706e67"><img src="https://camo.githubusercontent.com/453a2a989ca13fb7b532866aa59da6a3fbcd522910e66f6e14b940bbc199d36d/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430353837383733302d31303439333630392d306632332d343939622d383439352d3334633238323965643265372e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733405878730-10493609-0f23-499b-8495-34c2829ed2e7.png" style="max-width: 100%;"></a></p>
<h3>MyBatis逆向工程</h3>
<h4>什么是逆向工程？</h4>
<p>逆向工程（Reverse Engineering）是一种技术，通过分析现有的系统或代码，生成相应的设计文档或模型。在数据库开发中，逆向工程通常指的是从现有的数据库结构生成相应的代码，如实体类、Mapper接口等。</p>
<h4>MyBatis逆向工程</h4>
<p>MyBatis提供了逆向工程工具，可以根据数据库表结构自动生成相应的实体类、Mapper接口和XML配置文件，从而简化开发过程。</p>
<h4>使用MyBatis逆向工程的步骤</h4>
<ol>
<li><strong>引入依赖</strong><br>
在项目的<code class="notranslate">pom.xml</code>文件中添加MyBatis逆向工程相关的依赖：</li>
</ol>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;<span class="pl-ent">dependency</span>&gt;
    &lt;<span class="pl-ent">groupId</span>&gt;org.mybatis.generator&lt;/<span class="pl-ent">groupId</span>&gt;
    &lt;<span class="pl-ent">artifactId</span>&gt;mybatis-generator-core&lt;/<span class="pl-ent">artifactId</span>&gt;
    &lt;<span class="pl-ent">version</span>&gt;1.4.0&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</pre></div>
<ol>
<li><strong>配置逆向工程</strong><br>
创建一个逆向工程配置文件<code class="notranslate">generatorConfig.xml</code>，配置数据库连接信息和生成代码的路径：</li>
</ol>
<div class="highlight highlight-text-xml"><pre class="notranslate">&lt;?<span class="pl-ent">xml</span><span class="pl-e"> version</span>=<span class="pl-s"><span class="pl-pds">"</span>1.0<span class="pl-pds">"</span></span><span class="pl-e"> encoding</span>=<span class="pl-s"><span class="pl-pds">"</span>UTF-8<span class="pl-pds">"</span></span>?&gt;
&lt;!<span class="pl-ent">DOCTYPE</span> <span class="pl-e">generatorConfiguration</span>
    PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"
    "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;
&lt;<span class="pl-ent">generatorConfiguration</span>&gt;
    &lt;<span class="pl-ent">context</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>MySQLTables<span class="pl-pds">"</span></span> <span class="pl-e">targetRuntime</span>=<span class="pl-s"><span class="pl-pds">"</span>MyBatis3<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">jdbcConnection</span> <span class="pl-e">driverClass</span>=<span class="pl-s"><span class="pl-pds">"</span>com.mysql.cj.jdbc.Driver<span class="pl-pds">"</span></span>
                        <span class="pl-e">connectionURL</span>=<span class="pl-s"><span class="pl-pds">"</span>jdbc:mysql://localhost:3306/mydatabase<span class="pl-pds">"</span></span>
                        <span class="pl-e">userId</span>=<span class="pl-s"><span class="pl-pds">"</span>root<span class="pl-pds">"</span></span>
                        <span class="pl-e">password</span>=<span class="pl-s"><span class="pl-pds">"</span>password<span class="pl-pds">"</span></span>/&gt;
        &lt;<span class="pl-ent">javaModelGenerator</span> <span class="pl-e">targetPackage</span>=<span class="pl-s"><span class="pl-pds">"</span>com.example.model<span class="pl-pds">"</span></span> <span class="pl-e">targetProject</span>=<span class="pl-s"><span class="pl-pds">"</span>src/main/java<span class="pl-pds">"</span></span>/&gt;
        &lt;<span class="pl-ent">sqlMapGenerator</span> <span class="pl-e">targetPackage</span>=<span class="pl-s"><span class="pl-pds">"</span>mapper<span class="pl-pds">"</span></span> <span class="pl-e">targetProject</span>=<span class="pl-s"><span class="pl-pds">"</span>src/main/resources<span class="pl-pds">"</span></span>/&gt;
        &lt;<span class="pl-ent">javaClientGenerator</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>XMLMAPPER<span class="pl-pds">"</span></span> <span class="pl-e">targetPackage</span>=<span class="pl-s"><span class="pl-pds">"</span>com.example.mapper<span class="pl-pds">"</span></span> <span class="pl-e">targetProject</span>=<span class="pl-s"><span class="pl-pds">"</span>src/main/java<span class="pl-pds">"</span></span>/&gt;
        &lt;<span class="pl-ent">table</span> <span class="pl-e">tableName</span>=<span class="pl-s"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span>/&gt;
    &lt;/<span class="pl-ent">context</span>&gt;
&lt;/<span class="pl-ent">generatorConfiguration</span>&gt;</pre></div>
<ol>
<li><strong>运行逆向工程</strong><br>
使用MyBatis Generator插件运行逆向工程，生成相应的代码：</li>
</ol>
<div class="highlight highlight-source-shell"><pre class="notranslate">mvn mybatis-generator:generate</pre></div>
<p>通过以上步骤，MyBatis逆向工程工具会根据数据库表结构自动生成相应的实体类、Mapper接口和XML配置文件，从而简化开发过程.</p>
<h4>我们可以直接在idea中安装逆向插件</h4>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/a2496c06b5e75d3a8a4a130f8b6da0509f242adb3f3839621ade7ea85d19af3b/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430363139343334342d32366437626633632d383536622d346236312d616463662d3339353165336430306536662e706e67"><img src="https://camo.githubusercontent.com/a2496c06b5e75d3a8a4a130f8b6da0509f242adb3f3839621ade7ea85d19af3b/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430363139343334342d32366437626633632d383536622d346236312d616463662d3339353165336430306536662e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733406194344-26d7bf3c-856b-4b61-adcf-3951e3d00e6f.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/eaf33fc36cc097b0e3355d551b7813d4c40db539415f4b265f800380e6d3f326/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430363431313732312d32333134343162352d626166372d346437312d393165382d3664393434613764643165332e706e67"><img src="https://camo.githubusercontent.com/eaf33fc36cc097b0e3355d551b7813d4c40db539415f4b265f800380e6d3f326/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430363431313732312d32333134343162352d626166372d346437312d393165382d3664393434613764643165332e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733406411721-231441b5-baf7-4d71-91e8-6d944a7dd1e3.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/a42633a67b391b2756acd9c00db8cfdbe9bff0500abd9fc5b560f9897f0f4e43/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430363238363834382d36373361643966382d626263642d343630662d393237642d3838373930313834306334652e706e67"><img src="https://camo.githubusercontent.com/a42633a67b391b2756acd9c00db8cfdbe9bff0500abd9fc5b560f9897f0f4e43/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430363238363834382d36373361643966382d626263642d343630662d393237642d3838373930313834306334652e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733406286848-673ad9f8-bbcd-460f-927d-887901840c4e.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/241260f1ea943f311c937143b232e67b3f8ff662e5bc2d3d0656c7f8f05808ce/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430363432393832322d62396666663361642d646530612d346436642d623434322d3865353661656465393462362e706e67"><img src="https://camo.githubusercontent.com/241260f1ea943f311c937143b232e67b3f8ff662e5bc2d3d0656c7f8f05808ce/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430363432393832322d62396666663361642d646530612d346436642d623434322d3865353661656465393462362e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733406429822-b9fff3ad-de0a-4d6d-b442-8e56aede94b6.png" style="max-width: 100%;"></a></p>
<p>自动生成的</p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/3b506362f6dd0fa260d49e4e4b6923088e1250490b8d3f253b7297de4e962ad8/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430363337333734302d61386265616630622d343362362d346134312d393437312d6237653132666537646466612e706e67"><img src="https://camo.githubusercontent.com/3b506362f6dd0fa260d49e4e4b6923088e1250490b8d3f253b7297de4e962ad8/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430363337333734302d61386265616630622d343362362d346134312d393437312d6237653132666537646466612e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733406373740-a8beaf0b-43b6-4a41-9471-b7e12fe7ddfa.png" style="max-width: 100%;"></a></p>
<p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/5a4ebab2d683a5a89fd97e1a47e761ef09d8a024e59251ecb2ef39824a94623f/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430353935313232332d30363935643662662d363763342d346633372d626364632d3539383165343065633438302e706e67"><img src="https://camo.githubusercontent.com/5a4ebab2d683a5a89fd97e1a47e761ef09d8a024e59251ecb2ef39824a94623f/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032342f706e672f34393435353431312f313733333430353935313232332d30363935643662662d363763342d346633372d626364632d3539383165343065633438302e706e67" alt="" data-canonical-src="https://cdn.nlark.com/yuque/0/2024/png/49455411/1733405951223-0695d6bf-67c4-4f37-bcdc-5981e40ec480.png" style="max-width: 100%;"></a></p>
<p>半自动，单表自动生成mapper接口和xml文件配置</p></div>
<div style="font-size:small;margin-top:8px;float:right;"><footer style="padding:10px 15px;text-align:left;font-size:14px;color:#555;border-top:1px solid #e0e0e0;line-height:1.8;font-family:Arial,sans-serif"><span>注意：转载请注明出处 <br> 转载请先阅读以下文章 </span><a href="https://blog.adouzi.eu.org/post/21.html" style="color:#0078d7;text-decoration:none">关于博客文章转载规则以及一些闲聊</a> <br><br> <span>  个人主页：<a href="https://adouzi.eu.org" style="color:#0078d7;text-decoration:none">https://adouzi.eu.org</a></span><span> | Email：<a href="mailto:shiraayano@adouzi.eu.org" style="color:#0078d7;text-decoration:none">shiraayano@adouzi.eu.org</a><br><br><br>支持笔者：<a href="https://www.profitableratecpm.com/euxxr69t?key=f815bdc51cd258ab9f699175b0ef4446" style="color:#0078d7;text-decoration:none">点击广告</a><br>广告收入是本站唯一的收入，若本站内容帮到了您，可以点击广告支持笔者。</span><script async data-cfasync="false" src="//pl27420049.profitableratecpm.com/0f4f9e716ea5257a380097bb2d39a0bb/invoke.js"></script><div id="container-0f4f9e716ea5257a380097bb2d39a0bb"></div><br><script type="text/javascript">
atOptions = {
	'key' : '7a765266e94fd2cc53f429f1806bfa33',
	'format' : 'iframe',
	'height' : 90,
	'width' : 728,
	'params' : {}
}; </script><script type='text/javascript' src='//www.highperformanceformat.com/7a765266e94fd2cc53f429f1806bfa33/invoke.js'></script></footer></div>

<button class="btn btn-block" type="button" onclick="openComments()" id="cmButton">评论</button>
<div class="comments" id="comments"></div>

</div>
    <div id="footer"><div id="footer1">Copyright © <span id="copyrightYear"></span> <a href="https://blog.adouzi.eu.org">白綾乃的博客</a></div>
<div id="footer2"><span id="filingNum"><a href="https://beian.miit.gov.cn/" target="_blank"><a href='https://icp.gov.moe/?keyword=20240287' target='_blank'>萌ICP备20240287号</a></a> • </span>
    <span id="runday"></span><span>Powered by <a href="https://meekdai.com/Gmeek.html" target="_blank">Gmeek</a></span>
</div>

<script>
var now=new Date();
document.getElementById("copyrightYear").innerHTML=now.getFullYear();

if("07/12/2024"!=""){
    var startSite=new Date("07/12/2024");
    var diff=now.getTime()-startSite.getTime();
    var diffDay=Math.floor(diff/(1000*60*60*24));
    document.getElementById("runday").innerHTML="网站运行"+diffDay+"天"+" • ";
}
</script></div>
</body>
<script>
var IconList={'sun': 'M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z', 'moon': 'M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z', 'sync': 'M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z', 'home': 'M6.906.664a1.749 1.749 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z', 'github': 'M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z', 'copy': 'M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z', 'check': 'M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'};
var utterancesLoad=0;

let themeSettings={
    "dark": ["dark","moon","#00f0ff","dark-blue"],
    "light": ["light","sun","#ff5000","github-light"],
    "auto": ["auto","sync","","preferred-color-scheme"]
};
function changeTheme(mode, icon, color, utheme){
    document.documentElement.setAttribute("data-color-mode",mode);
    document.getElementById("themeSwitch").setAttribute("d",value=IconList[icon]);
    document.getElementById("themeSwitch").parentNode.style.color=color;
    if(utterancesLoad==1){utterancesTheme(utheme);}
}
function modeSwitch(){
    let currentMode=document.documentElement.getAttribute('data-color-mode');
    let newMode = currentMode === "light" ? "dark" : currentMode === "dark" ? "auto" : "light";
    localStorage.setItem("meek_theme", newMode);
    if(themeSettings[newMode]){
        changeTheme(...themeSettings[newMode]);
    }
}
function utterancesTheme(theme){
    const message={type:'set-theme',theme: theme};
    const iframe=document.getElementsByClassName('utterances-frame')[0];
    iframe.contentWindow.postMessage(message,'https://utteranc.es');
}
if(themeSettings[theme]){changeTheme(...themeSettings[theme]);}
console.log("\n %c Gmeek last https://github.com/Meekdai/Gmeek \n","padding:5px 0;background:#02d81d;color:#fff");
</script>

<script>
document.getElementById("pathHome").setAttribute("d",IconList["home"]);
document.getElementById("pathIssue").setAttribute("d",IconList["github"]);
cmButton=document.getElementById("cmButton");
    span=document.createElement("span");
    span.setAttribute("class","Counter");
    span.innerHTML="1";
    cmButton.appendChild(span);


function openComments(){
    cm=document.getElementById("comments");
    cmButton=document.getElementById("cmButton");
    cmButton.innerHTML="loading";
    span=document.createElement("span");
    span.setAttribute("class","AnimatedEllipsis");
    cmButton.appendChild(span);

    script=document.createElement("script");
    script.setAttribute("src","https://utteranc.es/client.js");
    script.setAttribute("repo","shiraayano/shiraayano.github.io");
    script.setAttribute("issue-term","title");
    
    if(localStorage.getItem("meek_theme")=="dark"){script.setAttribute("theme","dark-blue");}
    else if(localStorage.getItem("meek_theme")=="light") {script.setAttribute("theme","github-light");}
    else{script.setAttribute("theme","preferred-color-scheme");}
    
    script.setAttribute("crossorigin","anonymous");
    script.setAttribute("async","");
    cm.appendChild(script);

    int=self.setInterval("iFrameLoading()",200);
}

function iFrameLoading(){
    var utterances=document.getElementsByClassName('utterances');
    if(utterances.length==1){
        if(utterances[0].style.height!=""){
            utterancesLoad=1;
            int=window.clearInterval(int);
            document.getElementById("cmButton").style.display="none";
            console.log("utterances Load OK");
        }
    }
}

document.addEventListener('DOMContentLoaded', () => {
    const createClipboardHTML = (codeContent, additionalClasses = '') => `
        <pre class="notranslate"><code class="notranslate">${codeContent}</code></pre>
        <div class="clipboard-container position-absolute right-0 top-0 ${additionalClasses}">
            <clipboard-copy class="ClipboardButton btn m-2 p-0" role="button" style="display: inherit;">
                <svg height="16" width="16" class="octicon octicon-copy m-2"><path d="${IconList["copy"]}"></path></svg>
                <svg height="16" width="16" class="octicon octicon-check color-fg-success m-2 d-none"><path d="${IconList["check"]}"></path></svg>
            </clipboard-copy>
            <div class="copy-feedback">Copied!</div>
        </div>
    `;

    const handleCodeElements = (selector = '') => {
        document.querySelectorAll(selector).forEach(codeElement => {
            const codeContent = codeElement.innerHTML;
            const newStructure = document.createElement('div');
            newStructure.className = 'snippet-clipboard-content position-relative overflow-auto';
            newStructure.innerHTML = createClipboardHTML(codeContent);

            const parentElement = codeElement.parentElement;
            if (selector.includes('highlight')) {
                parentElement.insertBefore(newStructure, codeElement.nextSibling);
                parentElement.removeChild(codeElement);
            } else {
                parentElement.parentElement.replaceChild(newStructure, parentElement);
            }
        });
    };

    handleCodeElements('pre.notranslate > code.notranslate');
    handleCodeElements('div.highlight > pre.notranslate');

    let currentFeedback = null;
    document.querySelectorAll('clipboard-copy').forEach(copyButton => {
        copyButton.addEventListener('click', () => {
            const codeContent = copyButton.closest('.snippet-clipboard-content').innerText;
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = codeContent;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            document.execCommand('copy');
            document.body.removeChild(tempTextArea);

            const copyIcon = copyButton.querySelector('.octicon-copy');
            const checkIcon = copyButton.querySelector('.octicon-check');
            const copyFeedback = copyButton.nextElementSibling;

            if (currentFeedback && currentFeedback !== copyFeedback) {currentFeedback.style.display = 'none';}
            currentFeedback = copyFeedback;

            copyIcon.classList.add('d-none');
            checkIcon.classList.remove('d-none');
            copyFeedback.style.display = 'block';
            copyButton.style.borderColor = 'var(--color-success-fg)';

            setTimeout(() => {
                copyIcon.classList.remove('d-none');
                checkIcon.classList.add('d-none');
                copyFeedback.style.display = 'none';
                copyButton.style.borderColor = '';
            }, 2000);
        });
    });
});

</script>
<script>document.addEventListener('visibilitychange',function(){const o=document.title;const i=['不来看看咱喵~？','喵喵喵~？'];if(document.visibilityState==='hidden'){document.title=i[Math.floor(Math.random()*i.length)];}else{document.title='欢迎回来喵~';setTimeout(function(){document.title=o;},1000);}});</script><script src='https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js'></script><script>document.addEventListener('visibilitychange',function(){if(!window.originalTitle){window.originalTitle=document.title;}const h=['不来看看咱喵~？','喵喵喵~？'];if(document.visibilityState==='hidden'){document.title=h[Math.floor(Math.random()*h.length)];}else{document.title='欢迎回来喵~';setTimeout(()=>{document.title=window.originalTitle;},1000);}});</script>

</html>
